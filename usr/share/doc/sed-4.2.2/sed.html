<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This file documents version 4.2.2 of
GNU sed, a stream editor.

Copyright (C) 1998, 1999, 2001, 2002, 2003, 2004 Free
Software Foundation, Inc.

This document is released under the terms of the GNU Free
Documentation License as published by the Free Software Foundation;
either version 1.1, or (at your option) any later version.

You should have received a copy of the GNU Free Documentation
License along with GNU sed; see the file COPYING.DOC.
If not, write to the Free Software Foundation, 59 Temple Place - Suite
330, Boston, MA 02110-1301, USA.

There are no Cover Texts and no Invariant Sections; this text, along
with its equivalent in the printed manual, constitutes the Title Page. -->
<!-- Created by GNU Texinfo 6.0, http://www.gnu.org/software/texinfo/ -->
<head>
<title>sed, a stream editor</title>

<meta name="description" content="sed, a stream editor">
<meta name="keywords" content="sed, a stream editor">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#Top" rel="start" title="Top">
<link href="#Concept-Index" rel="index" title="Concept Index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="dir.html#Top" rel="up" title="(dir)">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space: nowrap}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: serif; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<h1 class="settitle" align="center">sed, a stream editor</h1>











<a name="Top"></a>
<div class="header">
<p>
Next: <a href="#Introduction" accesskey="n" rel="next">Introduction</a>, Up: <a href="dir.html#Top" accesskey="u" rel="up">(dir)</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="SEC_Top"></a>

<p>This file documents version 4.2.2 of
<acronym>GNU</acronym> <code>sed</code>, a stream editor.
</p>
<p>Copyright &copy; 1998, 1999, 2001, 2002, 2003, 2004 Free
Software Foundation, Inc.
</p>
<p>This document is released under the terms of the <acronym>GNU</acronym> Free
Documentation License as published by the Free Software Foundation;
either version 1.1, or (at your option) any later version.
</p>
<p>You should have received a copy of the <acronym>GNU</acronym> Free Documentation
License along with <acronym>GNU</acronym> <code>sed</code>; see the file <samp>COPYING.DOC</samp>.
If not, write to the Free Software Foundation, 59 Temple Place - Suite
330, Boston, MA 02110-1301, USA.
</p>
<p>There are no Cover Texts and no Invariant Sections; this text, along
with its equivalent in the printed manual, constitutes the Title Page.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Introduction" accesskey="1">Introduction</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Introduction
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Invoking-sed" accesskey="2">Invoking sed</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Invocation
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#sed-Programs" accesskey="3">sed Programs</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code> programs
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Examples" accesskey="4">Examples</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Some sample scripts
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Limitations" accesskey="5">Limitations</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Limitations and (non-)limitations of <acronym>GNU</acronym> <code>sed</code>
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Other-Resources" accesskey="6">Other Resources</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Other resources for learning about <code>sed</code>
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Reporting-Bugs" accesskey="7">Reporting Bugs</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Reporting bugs
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#Extended-regexps" accesskey="8">Extended regexps</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>egrep</code>-style regular expressions
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#Concept-Index" accesskey="9">Concept Index</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A menu with all the topics in this manual.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Command-and-Option-Index">Command and Option Index</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A menu with all <code>sed</code> commands and
                               command-line options.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
</pre></th></tr><tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">&mdash; The detailed node listing &mdash;

sed Programs:
</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#Execution-Cycle">Execution Cycle</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How <code>sed</code> works
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Addresses">Addresses</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Selecting lines with <code>sed</code>
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Regular-Expressions">Regular Expressions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Overview of regular expression syntax
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Common-Commands">Common Commands</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Often used commands
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code>&rsquo;s Swiss Army Knife
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Other-Commands">Other Commands</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Less frequently used commands
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Programming-Commands">Programming Commands</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Commands for <code>sed</code> gurus
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Extended-Commands">Extended Commands</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Commands specific of <acronym>GNU</acronym> <code>sed</code>
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Escapes">Escapes</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Specifying special characters
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Examples:
</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#Centering-lines">Centering lines</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Increment-a-number">Increment a number</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Rename-files-to-lower-case">Rename files to lower case</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Print-bash-environment">Print bash environment</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Reverse-chars-of-lines">Reverse chars of lines</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#tac">tac</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Reverse lines of files
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cat-_002dn">cat -n</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Numbering lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cat-_002db">cat -b</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Numbering non-blank lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#wc-_002dc">wc -c</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Counting chars
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#wc-_002dw">wc -w</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Counting words
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#wc-_002dl">wc -l</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Counting lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#head">head</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Printing the first lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#tail">tail</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Printing the last lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#uniq">uniq</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Make duplicate lines unique
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#uniq-_002dd">uniq -d</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Print duplicated lines of input
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#uniq-_002du">uniq -u</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Remove all duplicated lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cat-_002ds">cat -s</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Squeezing blank lines
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr></table>


<hr>
<a name="Introduction"></a>
<div class="header">
<p>
Next: <a href="#Invoking-sed" accesskey="n" rel="next">Invoking sed</a>, Previous: <a href="#Top" accesskey="p" rel="prev">Top</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Introduction-1"></a>
<h2 class="chapter">1 Introduction</h2>

<a name="index-Stream-editor"></a>
<p><code>sed</code> is a stream editor.
A stream editor is used to perform basic text
transformations on an input stream
(a file or input from a pipeline).
While in some ways similar to an editor which
permits scripted edits (such as <code>ed</code>),
<code>sed</code> works by making only one pass over the
input(s), and is consequently more efficient.
But it is <code>sed</code>&rsquo;s ability to filter text in a pipeline
which particularly distinguishes it from other types of
editors.
</p>

<hr>
<a name="Invoking-sed"></a>
<div class="header">
<p>
Next: <a href="#sed-Programs" accesskey="n" rel="next">sed Programs</a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Invocation"></a>
<h2 class="chapter">2 Invocation</h2>

<p>Normally <code>sed</code> is invoked like this:
</p>
<div class="example">
<pre class="example">sed SCRIPT INPUTFILE...
</pre></div>

<p>The full format for invoking <code>sed</code> is:
</p>
<div class="example">
<pre class="example">sed OPTIONS... [SCRIPT] [INPUTFILE...]
</pre></div>

<p>If you do not specify <var>INPUTFILE</var>, or if <var>INPUTFILE</var> is <samp>-</samp>,
<code>sed</code> filters the contents of the standard input.  The <var>script</var>
is actually the first non-option parameter, which <code>sed</code> specially
considers a script and not an input file if (and only if) none of the
other <var>options</var> specifies a script to be executed, that is if neither
of the <samp>-e</samp> and <samp>-f</samp> options is specified.
</p>
<p><code>sed</code> may be invoked with the following command-line options:
</p>
<dl compact="compact">
<dt><code>--version</code></dt>
<dd><a name="index-_002d_002dversion"></a>
<a name="index-Version_002c-printing"></a>
<p>Print out the version of <code>sed</code> that is being run and a copyright notice,
then exit.
</p>
</dd>
<dt><code>--help</code></dt>
<dd><a name="index-_002d_002dhelp"></a>
<a name="index-Usage-summary_002c-printing"></a>
<p>Print a usage message briefly summarizing these command-line options
and the bug-reporting address,
then exit.
</p>
</dd>
<dt><code>-n</code></dt>
<dt><code>--quiet</code></dt>
<dt><code>--silent</code></dt>
<dd><a name="index-_002dn"></a>
<a name="index-_002d_002dquiet"></a>
<a name="index-_002d_002dsilent"></a>
<a name="index-Disabling-autoprint_002c-from-command-line"></a>
<p>By default, <code>sed</code> prints out the pattern space
at the end of each cycle through the script (see <a href="#Execution-Cycle">How <code>sed</code> works</a>).
These options disable this automatic printing,
and <code>sed</code> only produces output when explicitly told to
via the <code>p</code> command.
</p>
</dd>
<dt><code>-e <var>script</var></code></dt>
<dt><code>--expression=<var>script</var></code></dt>
<dd><a name="index-_002de"></a>
<a name="index-_002d_002dexpression"></a>
<a name="index-Script_002c-from-command-line"></a>
<p>Add the commands in <var>script</var> to the set of commands to be
run while processing the input.
</p>
</dd>
<dt><code>-f <var>script-file</var></code></dt>
<dt><code>--file=<var>script-file</var></code></dt>
<dd><a name="index-_002df"></a>
<a name="index-_002d_002dfile"></a>
<a name="index-Script_002c-from-a-file"></a>
<p>Add the commands contained in the file <var>script-file</var>
to the set of commands to be run while processing the input.
</p>
</dd>
<dt><code>-i[<var>SUFFIX</var>]</code></dt>
<dt><code>--in-place[=<var>SUFFIX</var>]</code></dt>
<dd><a name="index-_002di"></a>
<a name="index-_002d_002din_002dplace"></a>
<a name="index-In_002dplace-editing_002c-activating"></a>
<a name="index-GNU-extensions_002c-in_002dplace-editing"></a>
<p>This option specifies that files are to be edited in-place.
<acronym>GNU</acronym> <code>sed</code> does this by creating a temporary file and
sending output to this file rather than to the standard
output.<a name="DOCF1" href="#FOOT1"><sup>1</sup></a>.
</p>
<p>This option implies <samp>-s</samp>.
</p>
<p>When the end of the file is reached, the temporary file is
renamed to the output file&rsquo;s original name.  The extension,
if supplied, is used to modify the name of the old file
before renaming the temporary file, thereby making a backup
copy<a name="DOCF2" href="#FOOT2"><sup>2</sup></a>).
</p>
<a name="index-In_002dplace-editing_002c-Perl_002dstyle-backup-file-names"></a>
<p>This rule is followed: if the extension doesn&rsquo;t contain a <code>*</code>,
then it is appended to the end of the current filename as a
suffix; if the extension does contain one or more <code>*</code>
characters, then <em>each</em> asterisk is replaced with the
current filename.  This allows you to add a prefix to the
backup file, instead of (or in addition to) a suffix, or
even to place backup copies of the original files into another
directory (provided the directory already exists).
</p>
<p>If no extension is supplied, the original file is
overwritten without making a backup.
</p>
</dd>
<dt><code>-l <var>N</var></code></dt>
<dt><code>--line-length=<var>N</var></code></dt>
<dd><a name="index-_002dl"></a>
<a name="index-_002d_002dline_002dlength"></a>
<a name="index-Line-length_002c-setting"></a>
<p>Specify the default line-wrap length for the <code>l</code> command.
A length of 0 (zero) means to never wrap long lines.  If
not specified, it is taken to be 70.
</p>
</dd>
<dt><code>--posix</code></dt>
<dd><a name="index-_002d_002dposix"></a>
<a name="index-GNU-extensions_002c-disabling"></a>
<p><acronym>GNU</acronym> <code>sed</code> includes several extensions to <acronym>POSIX</acronym>
sed.  In order to simplify writing portable scripts, this
option disables all the extensions that this manual documents,
including additional commands.
<a name="index-POSIXLY_005fCORRECT-behavior_002c-enabling"></a>
Most of the extensions accept <code>sed</code> programs that
are outside the syntax mandated by <acronym>POSIX</acronym>, but some
of them (such as the behavior of the <code>N</code> command
described in see <a href="#Reporting-Bugs">Reporting Bugs</a>) actually violate the
standard.  If you want to disable only the latter kind of
extension, you can set the <code>POSIXLY_CORRECT</code> variable
to a non-empty value.
</p>
</dd>
<dt><code>-b</code></dt>
<dt><code>--binary</code></dt>
<dd><a name="index-_002db"></a>
<a name="index-_002d_002dbinary"></a>
<p>This option is available on every platform, but is only effective where the
operating system makes a distinction between text files and binary files.
When such a distinction is made&mdash;as is the case for MS-DOS, Windows,
Cygwin&mdash;text files are composed of lines separated by a carriage return
<em>and</em> a line feed character, and <code>sed</code> does not see the
ending CR.  When this option is specified, <code>sed</code> will open
input files in binary mode, thus not requesting this special processing
and considering lines to end at a line feed.
</p>
</dd>
<dt><code>--follow-symlinks</code></dt>
<dd><a name="index-_002d_002dfollow_002dsymlinks"></a>
<p>This option is available only on platforms that support
symbolic links and has an effect only if option <samp>-i</samp>
is specified.  In this case, if the file that is specified
on the command line is a symbolic link, <code>sed</code> will
follow the link and edit the ultimate destination of the
link.  The default behavior is to break the symbolic link,
so that the link destination will not be modified.
</p>
</dd>
<dt><code>-r</code></dt>
<dt><code>--regexp-extended</code></dt>
<dd><a name="index-_002dr"></a>
<a name="index-_002d_002dregexp_002dextended"></a>
<a name="index-Extended-regular-expressions_002c-choosing"></a>
<a name="index-GNU-extensions_002c-extended-regular-expressions"></a>
<p>Use extended regular expressions rather than basic
regular expressions.  Extended regexps are those that
<code>egrep</code> accepts; they can be clearer because they
usually have less backslashes, but are a <acronym>GNU</acronym> extension
and hence scripts that use them are not portable.
See <a href="#Extended-regexps">Extended regular expressions</a>.
</p>

</dd>
<dt><code>-s</code></dt>
<dt><code>--separate</code></dt>
<dd><a name="index-_002ds"></a>
<a name="index-_002d_002dseparate"></a>
<a name="index-Working-on-separate-files"></a>
<p>By default, <code>sed</code> will consider the files specified on the
command line as a single continuous long stream.  This <acronym>GNU</acronym> <code>sed</code>
extension allows the user to consider them as separate files:
range addresses (such as &lsquo;<samp>/abc/,/def/</samp>&rsquo;) are not allowed
to span several files, line numbers are relative to the start
of each file, <code>$</code> refers to the last line of each file,
and files invoked from the <code>R</code> commands are rewound at the
start of each file.
</p>
</dd>
<dt><code>-u</code></dt>
<dt><code>--unbuffered</code></dt>
<dd><a name="index-_002du"></a>
<a name="index-_002d_002dunbuffered"></a>
<a name="index-Unbuffered-I_002fO_002c-choosing"></a>
<p>Buffer both input and output as minimally as practical.
(This is particularly useful if the input is coming from
the likes of &lsquo;<samp>tail -f</samp>&rsquo;, and you wish to see the transformed
output as soon as possible.)
</p>
</dd>
<dt><code>-z</code></dt>
<dt><code>--null-data</code></dt>
<dt><code>--zero-terminated</code></dt>
<dd><a name="index-_002dz"></a>
<a name="index-_002d_002dnull_002ddata"></a>
<a name="index-_002d_002dzero_002dterminated"></a>
<p>Treat the input as a set of lines, each terminated by a zero byte
(the ASCII &lsquo;<samp>NUL</samp>&rsquo; character) instead of a newline.  This option can
be used with commands like &lsquo;<samp>sort -z</samp>&rsquo; and &lsquo;<samp>find -print0</samp>&rsquo;
to process arbitrary file names.
</p></dd>
</dl>

<p>If no <samp>-e</samp>, <samp>-f</samp>, <samp>--expression</samp>, or <samp>--file</samp>
options are given on the command-line,
then the first non-option argument on the command line is
taken to be the <var>script</var> to be executed.
</p>
<a name="index-Files-to-be-processed-as-input"></a>
<p>If any command-line parameters remain after processing the above,
these parameters are interpreted as the names of input files to
be processed.
<a name="index-Standard-input_002c-processing-as-input"></a>
A file name of &lsquo;<samp>-</samp>&rsquo; refers to the standard input stream.
The standard input will be processed if no file names are specified.
</p>

<hr>
<a name="sed-Programs"></a>
<div class="header">
<p>
Next: <a href="#Examples" accesskey="n" rel="next">Examples</a>, Previous: <a href="#Invoking-sed" accesskey="p" rel="prev">Invoking sed</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="sed-Programs-1"></a>
<h2 class="chapter">3 <code>sed</code> Programs</h2>

<a name="index-sed-program-structure"></a>
<a name="index-Script-structure"></a>
<p>A <code>sed</code> program consists of one or more <code>sed</code> commands,
passed in by one or more of the
<samp>-e</samp>, <samp>-f</samp>, <samp>--expression</samp>, and <samp>--file</samp>
options, or the first non-option argument if zero of these
options are used.
This document will refer to &ldquo;the&rdquo; <code>sed</code> script;
this is understood to mean the in-order catenation
of all of the <var>script</var>s and <var>script-file</var>s passed in.
</p>
<p>Commands within a <var>script</var> or <var>script-file</var> can be
separated by semicolons (<code>;</code>) or newlines (ASCII 10).
Some commands, due to their syntax, cannot be followed by semicolons
working as command separators and thus should be terminated
with newlines or be placed at the end of a <var>script</var> or <var>script-file</var>.
Commands can also be preceded with optional non-significant
whitespace characters.
</p>
<p>Each <code>sed</code> command consists of an optional address or
address range, followed by a one-character command name
and any additional command-specific code.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Execution-Cycle" accesskey="1">Execution Cycle</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How <code>sed</code> works
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Addresses" accesskey="2">Addresses</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Selecting lines with <code>sed</code>
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Regular-Expressions" accesskey="3">Regular Expressions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Overview of regular expression syntax
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Common-Commands" accesskey="4">Common Commands</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Often used commands
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#The-_0022s_0022-Command" accesskey="5">The &quot;s&quot; Command</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code>&rsquo;s Swiss Army Knife
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Other-Commands" accesskey="6">Other Commands</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Less frequently used commands
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Programming-Commands" accesskey="7">Programming Commands</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Commands for <code>sed</code> gurus
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Extended-Commands" accesskey="8">Extended Commands</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Commands specific of <acronym>GNU</acronym> <code>sed</code>
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Escapes" accesskey="9">Escapes</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Specifying special characters
</td></tr>
</table>


<hr>
<a name="Execution-Cycle"></a>
<div class="header">
<p>
Next: <a href="#Addresses" accesskey="n" rel="next">Addresses</a>, Up: <a href="#sed-Programs" accesskey="u" rel="up">sed Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="How-sed-Works"></a>
<h3 class="section">3.1 How <code>sed</code> Works</h3>

<a name="index-Buffer-spaces_002c-pattern-and-hold"></a>
<a name="index-Spaces_002c-pattern-and-hold"></a>
<a name="index-Pattern-space_002c-definition"></a>
<a name="index-Hold-space_002c-definition"></a>
<p><code>sed</code> maintains two data buffers: the active <em>pattern</em> space,
and the auxiliary <em>hold</em> space. Both are initially empty.
</p>
<p><code>sed</code> operates by performing the following cycle on each
line of input: first, <code>sed</code> reads one line from the input
stream, removes any trailing newline, and places it in the pattern space.
Then commands are executed; each command can have an address associated
to it: addresses are a kind of condition code, and a command is only
executed if the condition is verified before the command is to be
executed.
</p>
<p>When the end of the script is reached, unless the <samp>-n</samp> option
is in use, the contents of pattern space are printed out to the output
stream, adding back the trailing newline if it was removed.<a name="DOCF3" href="#FOOT3"><sup>3</sup></a> Then the next cycle starts for the next
input line.
</p>
<p>Unless special commands (like &lsquo;<samp>D</samp>&rsquo;) are used, the pattern space is
deleted between two cycles. The hold space, on the other hand, keeps
its data between cycles (see commands &lsquo;<samp>h</samp>&rsquo;, &lsquo;<samp>H</samp>&rsquo;, &lsquo;<samp>x</samp>&rsquo;,
&lsquo;<samp>g</samp>&rsquo;, &lsquo;<samp>G</samp>&rsquo; to move data between both buffers).
</p>

<hr>
<a name="Addresses"></a>
<div class="header">
<p>
Next: <a href="#Regular-Expressions" accesskey="n" rel="next">Regular Expressions</a>, Previous: <a href="#Execution-Cycle" accesskey="p" rel="prev">Execution Cycle</a>, Up: <a href="#sed-Programs" accesskey="u" rel="up">sed Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Selecting-lines-with-sed"></a>
<h3 class="section">3.2 Selecting lines with <code>sed</code></h3>
<a name="index-Addresses_002c-in-sed-scripts"></a>
<a name="index-Line-selection"></a>
<a name="index-Selecting-lines-to-process"></a>

<p>Addresses in a <code>sed</code> script can be in any of the following forms:
</p><dl compact="compact">
<dt><code><var>number</var></code></dt>
<dd><a name="index-Address_002c-numeric"></a>
<a name="index-Line_002c-selecting-by-number"></a>
<p>Specifying a line number will match only that line in the input.
(Note that <code>sed</code> counts lines continuously across all input files
unless <samp>-i</samp> or <samp>-s</samp> options are specified.)
</p>
</dd>
<dt><code><var>first</var>~<var>step</var></code></dt>
<dd><a name="index-GNU-extensions_002c-n_007em-addresses"></a>
<p>This <acronym>GNU</acronym> extension matches every <var>step</var>th line
starting with line <var>first</var>.
In particular, lines will be selected when there exists
a non-negative <var>n</var> such that the current line-number equals
<var>first</var> + (<var>n</var> * <var>step</var>).
Thus, to select the odd-numbered lines,
one would use <code>1~2</code>;
to pick every third line starting with the second, &lsquo;<samp>2~3</samp>&rsquo; would be used;
to pick every fifth line starting with the tenth, use &lsquo;<samp>10~5</samp>&rsquo;;
and &lsquo;<samp>50~0</samp>&rsquo; is just an obscure way of saying <code>50</code>.
</p>
</dd>
<dt><code>$</code></dt>
<dd><a name="index-Address_002c-last-line"></a>
<a name="index-Last-line_002c-selecting"></a>
<a name="index-Line_002c-selecting-last"></a>
<p>This address matches the last line of the last file of input, or
the last line of each file when the <samp>-i</samp> or <samp>-s</samp> options
are specified.
</p>
</dd>
<dt><code>/<var>regexp</var>/</code></dt>
<dd><a name="index-Address_002c-as-a-regular-expression"></a>
<a name="index-Line_002c-selecting-by-regular-expression-match"></a>
<p>This will select any line which matches the regular expression <var>regexp</var>.
If <var>regexp</var> itself includes any <code>/</code> characters,
each must be escaped by a backslash (<code>\</code>).
</p>
<a name="index-empty-regular-expression"></a>
<a name="index-GNU-extensions_002c-modifiers-and-the-empty-regular-expression"></a>
<p>The empty regular expression &lsquo;<samp>//</samp>&rsquo; repeats the last regular
expression match (the same holds if the empty regular expression is
passed to the <code>s</code> command).  Note that modifiers to regular expressions
are evaluated when the regular expression is compiled, thus it is invalid to
specify them together with the empty regular expression.
</p>
</dd>
<dt><code>\%<var>regexp</var>%</code></dt>
<dd><p>(The <code>%</code> may be replaced by any other single character.)
</p>
<a name="index-Slash-character_002c-in-regular-expressions"></a>
<p>This also matches the regular expression <var>regexp</var>,
but allows one to use a different delimiter than <code>/</code>.
This is particularly useful if the <var>regexp</var> itself contains
a lot of slashes, since it avoids the tedious escaping of every <code>/</code>.
If <var>regexp</var> itself includes any delimiter characters,
each must be escaped by a backslash (<code>\</code>).
</p>
</dd>
<dt><code>/<var>regexp</var>/I</code></dt>
<dt><code>\%<var>regexp</var>%I</code></dt>
<dd><a name="index-GNU-extensions_002c-I-modifier"></a>
<p>The <code>I</code> modifier to regular-expression matching is a <acronym>GNU</acronym>
extension which causes the <var>regexp</var> to be matched in
a case-insensitive manner.
</p>
</dd>
<dt><code>/<var>regexp</var>/M</code></dt>
<dt><code>\%<var>regexp</var>%M</code></dt>
<dd><a name="index-GNU-extensions_002c-M-modifier"></a>
<p>The <code>M</code> modifier to regular-expression matching is a <acronym>GNU</acronym> <code>sed</code>
extension which directs <acronym>GNU</acronym> <code>sed</code> to match the regular expression
in <cite>multi-line</cite> mode.  The modifier causes <code>^</code> and <code>$</code> to
match respectively (in addition to the normal behavior) the empty string
after a newline, and the empty string before a newline.  There are
special character sequences
(<code>\`</code> and <code>\'</code>)
which always match the beginning or the end of the buffer.
In addition,
the period character does not match a new-line character in
multi-line mode.
</p>

</dd>
</dl>

<p>If no addresses are given, then all lines are matched;
if one address is given, then only lines matching that
address are matched.
</p>
<a name="index-Range-of-lines"></a>
<a name="index-Several-lines_002c-selecting"></a>
<p>An address range can be specified by specifying two addresses
separated by a comma (<code>,</code>).  An address range matches lines
starting from where the first address matches, and continues
until the second address matches (inclusively).
</p>
<p>If the second address is a <var>regexp</var>, then checking for the
ending match will start with the line <em>following</em> the
line which matched the first address: a range will always
span at least two lines (except of course if the input stream
ends).
</p>
<p>If the second address is a <var>number</var> less than (or equal to)
the line matching the first address, then only the one line is
matched.
</p>
<a name="index-Special-addressing-forms"></a>
<a name="index-Range-with-start-address-of-zero"></a>
<a name="index-Zero_002c-as-range-start-address"></a>
<a name="index-addr1_002c_002bN"></a>
<a name="index-addr1_002c_007eN"></a>
<a name="index-GNU-extensions_002c-special-two_002daddress-forms"></a>
<a name="index-GNU-extensions_002c-0-address"></a>
<a name="index-GNU-extensions_002c-0_002caddr2-addressing"></a>
<a name="index-GNU-extensions_002c-addr1_002c_002bN-addressing"></a>
<a name="index-GNU-extensions_002c-addr1_002c_007eN-addressing"></a>
<p><acronym>GNU</acronym> <code>sed</code> also supports some special two-address forms; all these
are <acronym>GNU</acronym> extensions:
</p><dl compact="compact">
<dt><code>0,/<var>regexp</var>/</code></dt>
<dd><p>A line number of <code>0</code> can be used in an address specification like
<code>0,/<var>regexp</var>/</code> so that <code>sed</code> will try to match
<var>regexp</var> in the first input line too.  In other words,
<code>0,/<var>regexp</var>/</code> is similar to <code>1,/<var>regexp</var>/</code>,
except that if <var>addr2</var> matches the very first line of input the
<code>0,/<var>regexp</var>/</code> form will consider it to end the range, whereas
the <code>1,/<var>regexp</var>/</code> form will match the beginning of its range and
hence make the range span up to the <em>second</em> occurrence of the
regular expression.
</p>
<p>Note that this is the only place where the <code>0</code> address makes
sense; there is no 0-th line and commands which are given the <code>0</code>
address in any other way will give an error.
</p>
</dd>
<dt><code><var>addr1</var>,+<var>N</var></code></dt>
<dd><p>Matches <var>addr1</var> and the <var>N</var> lines following <var>addr1</var>.
</p>
</dd>
<dt><code><var>addr1</var>,~<var>N</var></code></dt>
<dd><p>Matches <var>addr1</var> and the lines following <var>addr1</var>
until the next line whose input line number is a multiple of <var>N</var>.
</p></dd>
</dl>

<a name="index-Excluding-lines"></a>
<a name="index-Selecting-non_002dmatching-lines"></a>
<p>Appending the <code>!</code> character to the end of an address
specification negates the sense of the match.
That is, if the <code>!</code> character follows an address range,
then only lines which do <em>not</em> match the address range
will be selected.
This also works for singleton addresses,
and, perhaps perversely, for the null address.
</p>

<hr>
<a name="Regular-Expressions"></a>
<div class="header">
<p>
Next: <a href="#Common-Commands" accesskey="n" rel="next">Common Commands</a>, Previous: <a href="#Addresses" accesskey="p" rel="prev">Addresses</a>, Up: <a href="#sed-Programs" accesskey="u" rel="up">sed Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Overview-of-Regular-Expression-Syntax"></a>
<h3 class="section">3.3 Overview of Regular Expression Syntax</h3>

<p>To know how to use <code>sed</code>, people should understand regular
expressions (<em>regexp</em> for short).  A regular expression
is a pattern that is matched against a
subject string from left to right.  Most characters are
<em>ordinary</em>: they stand for
themselves in a pattern, and match the corresponding characters
in the subject.  As a trivial example, the pattern
</p>
<div class="example">
<pre class="example">The quick brown fox
</pre></div>

<p>matches a portion of a subject string that is identical to
itself.  The power of regular expressions comes from the
ability to include alternatives and repetitions in the pattern.
These are encoded in the pattern by the use of <em>special characters</em>,
which do not stand for themselves but instead
are interpreted in some special way.  Here is a brief description
of regular expression syntax as used in <code>sed</code>.
</p>
<dl compact="compact">
<dt><code><var>char</var></code></dt>
<dd><p>A single ordinary character matches itself.
</p>
</dd>
<dt><code>*</code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions"></a>
<p>Matches a sequence of zero or more instances of matches for the
preceding regular expression, which must be an ordinary character, a
special character preceded by <code>\</code>, a <code>.</code>, a grouped regexp
(see below), or a bracket expression.  As a <acronym>GNU</acronym> extension, a
postfixed regular expression can also be followed by <code>*</code>; for
example, <code>a**</code> is equivalent to <code>a*</code>.  <acronym>POSIX</acronym>
1003.1-2001 says that <code>*</code> stands for itself when it appears at
the start of a regular expression or subexpression, but many
non<acronym>GNU</acronym> implementations do not support this and portable
scripts should instead use <code>\*</code> in these contexts.
</p>
</dd>
<dt><code>\+</code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-1"></a>
<p>As <code>*</code>, but matches one or more.  It is a <acronym>GNU</acronym> extension.
</p>
</dd>
<dt><code>\?</code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-2"></a>
<p>As <code>*</code>, but only matches zero or one.  It is a <acronym>GNU</acronym> extension.
</p>
</dd>
<dt><code>\{<var>i</var>\}</code></dt>
<dd><p>As <code>*</code>, but matches exactly <var>i</var> sequences (<var>i</var> is a
decimal integer; for portability, keep it between 0 and 255
inclusive).
</p>
</dd>
<dt><code>\{<var>i</var>,<var>j</var>\}</code></dt>
<dd><p>Matches between <var>i</var> and <var>j</var>, inclusive, sequences.
</p>
</dd>
<dt><code>\{<var>i</var>,\}</code></dt>
<dd><p>Matches more than or equal to <var>i</var> sequences.
</p>
</dd>
<dt><code>\(<var>regexp</var>\)</code></dt>
<dd><p>Groups the inner <var>regexp</var> as a whole, this is used to: 
</p>
<ul>
<li> <a name="index-GNU-extensions_002c-to-basic-regular-expressions-3"></a>
Apply postfix operators, like <code>\(abcd\)*</code>:
this will search for zero or more whole sequences 
of &lsquo;<samp>abcd</samp>&rsquo;, while <code>abcd*</code> would search
for &lsquo;<samp>abc</samp>&rsquo; followed by zero or more occurrences
of &lsquo;<samp>d</samp>&rsquo;.  Note that support for <code>\(abcd\)*</code> is
required by <acronym>POSIX</acronym> 1003.1-2001, but many non-<acronym>GNU</acronym>
implementations do not support it and hence it is not universally
portable.         

</li><li> Use back references (see below).
</li></ul>

</dd>
<dt><code>.</code></dt>
<dd><p>Matches any character, including newline.
</p>
</dd>
<dt><code>^</code></dt>
<dd><p>Matches the null string at beginning of the pattern space, i.e. what
appears after the circumflex must appear at the beginning of the
pattern space.
</p>
<p>In most scripts, pattern space is initialized to the content of each
line (see <a href="#Execution-Cycle">How <code>sed</code> works</a>).  So, it is a
useful simplification to think of <code>^#include</code> as matching only
lines where &lsquo;<samp>#include</samp>&rsquo; is the first thing on line&mdash;if there are
spaces before, for example, the match fails.  This simplification is
valid as long as the original content of pattern space is not modified,
for example with an <code>s</code> command.
</p>
<p><code>^</code> acts as a special character only at the beginning of the
regular expression or subexpression (that is, after <code>\(</code> or
<code>\|</code>).  Portable scripts should avoid <code>^</code> at the beginning of
a subexpression, though, as <acronym>POSIX</acronym> allows implementations that
treat <code>^</code> as an ordinary character in that context.
</p>
</dd>
<dt><code>$</code></dt>
<dd><p>It is the same as <code>^</code>, but refers to end of pattern space.
<code>$</code> also acts as a special character only at the end
of the regular expression or subexpression (that is, before <code>\)</code>
or <code>\|</code>), and its use at the end of a subexpression is not
portable.
</p>

</dd>
<dt><code>[<var>list</var>]</code></dt>
<dt><code>[^<var>list</var>]</code></dt>
<dd><p>Matches any single character in <var>list</var>: for example,
<code>[aeiou]</code> matches all vowels.  A list may include
sequences like <code><var>char1</var>-<var>char2</var></code>, which
matches any character between (inclusive) <var>char1</var>
and <var>char2</var>.
</p>
<p>A leading <code>^</code> reverses the meaning of <var>list</var>, so that
it matches any single character <em>not</em> in <var>list</var>.  To include
<code>]</code> in the list, make it the first character (after
the <code>^</code> if needed), to include <code>-</code> in the list,
make it the first or last; to include <code>^</code> put
it after the first character.
</p>
<a name="index-POSIXLY_005fCORRECT-behavior_002c-bracket-expressions"></a>
<p>The characters <code>$</code>, <code>*</code>, <code>.</code>, <code>[</code>, and <code>\</code>
are normally not special within <var>list</var>.  For example, <code>[\*]</code>
matches either &lsquo;<samp>\</samp>&rsquo; or &lsquo;<samp>*</samp>&rsquo;, because the <code>\</code> is not
special here.  However, strings like <code>[.ch.]</code>, <code>[=a=]</code>, and
<code>[:space:]</code> are special within <var>list</var> and represent collating
symbols, equivalence classes, and character classes, respectively, and
<code>[</code> is therefore special within <var>list</var> when it is followed by
<code>.</code>, <code>=</code>, or <code>:</code>.  Also, when not in
<code>POSIXLY_CORRECT</code> mode, special escapes like <code>\n</code> and
<code>\t</code> are recognized within <var>list</var>.  See <a href="#Escapes">Escapes</a>.
</p>
</dd>
<dt><code><var>regexp1</var>\|<var>regexp2</var></code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-4"></a>
<p>Matches either <var>regexp1</var> or <var>regexp2</var>.  Use
parentheses to use complex alternative regular expressions.
The matching process tries each alternative in turn, from
left to right, and the first one that succeeds is used.
It is a <acronym>GNU</acronym> extension.
</p>
</dd>
<dt><code><var>regexp1</var><var>regexp2</var></code></dt>
<dd><p>Matches the concatenation of <var>regexp1</var> and <var>regexp2</var>.
Concatenation binds more tightly than <code>\|</code>, <code>^</code>, and
<code>$</code>, but less tightly than the other regular expression
operators.
</p>
</dd>
<dt><code>\<var>digit</var></code></dt>
<dd><p>Matches the <var>digit</var>-th <code>\(&hellip;\)</code> parenthesized
subexpression in the regular expression.  This is called a <em>back
reference</em>.  Subexpressions are implicity numbered by counting
occurrences of <code>\(</code> left-to-right.
</p>
</dd>
<dt><code>\n</code></dt>
<dd><p>Matches the newline character.
</p>
</dd>
<dt><code>\<var>char</var></code></dt>
<dd><p>Matches <var>char</var>, where <var>char</var> is one of <code>$</code>,
<code>*</code>, <code>.</code>, <code>[</code>, <code>\</code>, or <code>^</code>.
Note that the only C-like
backslash sequences that you can portably assume to be
interpreted are <code>\n</code> and <code>\\</code>; in particular
<code>\t</code> is not portable, and matches a &lsquo;<samp>t</samp>&rsquo; under most
implementations of <code>sed</code>, rather than a tab character.
</p>
</dd>
</dl>

<a name="index-Greedy-regular-expression-matching"></a>
<p>Note that the regular expression matcher is greedy, i.e., matches
are attempted from left to right and, if two or more matches are
possible starting at the same character, it selects the longest.
</p>
<p>Examples:
</p><dl compact="compact">
<dt>&lsquo;<samp>abcdef</samp>&rsquo;</dt>
<dd><p>Matches &lsquo;<samp>abcdef</samp>&rsquo;.
</p>
</dd>
<dt>&lsquo;<samp>a*b</samp>&rsquo;</dt>
<dd><p>Matches zero or more &lsquo;<samp>a</samp>&rsquo;s followed by a single
&lsquo;<samp>b</samp>&rsquo;.  For example, &lsquo;<samp>b</samp>&rsquo; or &lsquo;<samp>aaaaab</samp>&rsquo;. 
</p>
</dd>
<dt>&lsquo;<samp>a\?b</samp>&rsquo;</dt>
<dd><p>Matches &lsquo;<samp>b</samp>&rsquo; or &lsquo;<samp>ab</samp>&rsquo;.
</p>
</dd>
<dt>&lsquo;<samp>a\+b\+</samp>&rsquo;</dt>
<dd><p>Matches one or more &lsquo;<samp>a</samp>&rsquo;s followed by one or more
&lsquo;<samp>b</samp>&rsquo;s: &lsquo;<samp>ab</samp>&rsquo; is the shortest possible match, but
other examples are &lsquo;<samp>aaaab</samp>&rsquo; or &lsquo;<samp>abbbbb</samp>&rsquo; or
&lsquo;<samp>aaaaaabbbbbbb</samp>&rsquo;.
</p>
</dd>
<dt>&lsquo;<samp>.*</samp>&rsquo;</dt>
<dt>&lsquo;<samp>.\+</samp>&rsquo;</dt>
<dd><p>These two both match all the characters in a string;
however, the first matches every string (including the empty
string), while the second matches only strings containing
at least one character.
</p>
</dd>
<dt>&lsquo;<samp>^main.*(.*)</samp>&rsquo;</dt>
<dd><p>This matches a string starting with &lsquo;<samp>main</samp>&rsquo;,
followed by an opening and closing
parenthesis.  The &lsquo;<samp>n</samp>&rsquo;, &lsquo;<samp>(</samp>&rsquo; and &lsquo;<samp>)</samp>&rsquo; need not
be adjacent.
</p>
</dd>
<dt>&lsquo;<samp>^#</samp>&rsquo;</dt>
<dd><p>This matches a string beginning with &lsquo;<samp>#</samp>&rsquo;.
</p>
</dd>
<dt>&lsquo;<samp>\\$</samp>&rsquo;</dt>
<dd><p>This matches a string ending with a single backslash.  The
regexp contains two backslashes for escaping.
</p>
</dd>
<dt>&lsquo;<samp>\$</samp>&rsquo;</dt>
<dd><p>Instead, this matches a string consisting of a single dollar sign,
because it is escaped.
</p>
</dd>
<dt>&lsquo;<samp>[a-zA-Z0-9]</samp>&rsquo;</dt>
<dd><p>In the C locale, this matches any <acronym>ASCII</acronym> letters or digits.
</p>
</dd>
<dt>&lsquo;<samp>[^ <kbd>tab</kbd>]\+</samp>&rsquo;</dt>
<dd><p>(Here <kbd>tab</kbd> stands for a single tab character.)
This matches a string of one or more
characters, none of which is a space or a tab.
Usually this means a word.
</p>
</dd>
<dt>&lsquo;<samp>^\(.*\)\n\1$</samp>&rsquo;</dt>
<dd><p>This matches a string consisting of two equal substrings separated by
a newline.
</p>
</dd>
<dt>&lsquo;<samp>.\{9\}A$</samp>&rsquo;</dt>
<dd><p>This matches nine characters followed by an &lsquo;<samp>A</samp>&rsquo;.
</p>
</dd>
<dt>&lsquo;<samp>^.\{15\}A</samp>&rsquo;</dt>
<dd><p>This matches the start of a string that contains 16 characters,
the last of which is an &lsquo;<samp>A</samp>&rsquo;.
</p>
</dd>
</dl>



<hr>
<a name="Common-Commands"></a>
<div class="header">
<p>
Next: <a href="#The-_0022s_0022-Command" accesskey="n" rel="next">The &quot;s&quot; Command</a>, Previous: <a href="#Regular-Expressions" accesskey="p" rel="prev">Regular Expressions</a>, Up: <a href="#sed-Programs" accesskey="u" rel="up">sed Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Often_002dUsed-Commands"></a>
<h3 class="section">3.4 Often-Used Commands</h3>

<p>If you use <code>sed</code> at all, you will quite likely want to know
these commands.
</p>
<dl compact="compact">
<dt><code>#</code></dt>
<dd><p>[No addresses allowed.]
</p>
<a name="index-_0023-_0028comments_0029"></a>
<a name="index-Comments_002c-in-scripts"></a>
<p>The <code>#</code> character begins a comment;
the comment continues until the next newline.
</p>
<a name="index-Portability_002c-comments"></a>
<p>If you are concerned about portability, be aware that
some implementations of <code>sed</code> (which are not <small>POSIX</small>
conformant) may only support a single one-line comment,
and then only when the very first character of the script is a <code>#</code>.
</p>
<a name="index-_002dn_002c-forcing-from-within-a-script"></a>
<a name="index-Caveat-_002d_002d_002d-_0023n-on-first-line"></a>
<p>Warning: if the first two characters of the <code>sed</code> script
are <code>#n</code>, then the <samp>-n</samp> (no-autoprint) option is forced.
If you want to put a comment in the first line of your script
and that comment begins with the letter &lsquo;<samp>n</samp>&rsquo;
and you do not want this behavior,
then be sure to either use a capital &lsquo;<samp>N</samp>&rsquo;,
or place at least one space before the &lsquo;<samp>n</samp>&rsquo;.
</p>
</dd>
<dt><code>q [<var>exit-code</var>]</code></dt>
<dd><p>This command only accepts a single address.
</p>
<a name="index-q-_0028quit_0029-command"></a>
<a name="index-GNU-extensions_002c-returning-an-exit-code"></a>
<a name="index-Quitting"></a>
<p>Exit <code>sed</code> without processing any more commands or input.
Note that the current pattern space is printed if auto-print is
not disabled with the <samp>-n</samp> options.  The ability to return
an exit code from the <code>sed</code> script is a <acronym>GNU</acronym> <code>sed</code> extension.
</p>
</dd>
<dt><code>d</code></dt>
<dd><a name="index-d-_0028delete_0029-command"></a>
<a name="index-Text_002c-deleting"></a>
<p>Delete the pattern space;
immediately start next cycle.
</p>
</dd>
<dt><code>p</code></dt>
<dd><a name="index-p-_0028print_0029-command"></a>
<a name="index-Text_002c-printing"></a>
<p>Print out the pattern space (to the standard output).
This command is usually only used in conjunction with the <samp>-n</samp>
command-line option.
</p>
</dd>
<dt><code>n</code></dt>
<dd><a name="index-n-_0028next_002dline_0029-command"></a>
<a name="index-Next-input-line_002c-replace-pattern-space-with"></a>
<a name="index-Read-next-input-line"></a>
<p>If auto-print is not disabled, print the pattern space,
then, regardless, replace the pattern space with the next line of input.
If there is no more input then <code>sed</code> exits without processing
any more commands.
</p>
</dd>
<dt><code>{ <var>commands</var> }</code></dt>
<dd><a name="index-_007b_007d-command-grouping"></a>
<a name="index-Grouping-commands"></a>
<a name="index-Command-groups"></a>
<p>A group of commands may be enclosed between
<code>{</code> and <code>}</code> characters.
This is particularly useful when you want a group of commands
to be triggered by a single address (or address-range) match.
</p>
</dd>
</dl>

<hr>
<a name="The-_0022s_0022-Command"></a>
<div class="header">
<p>
Next: <a href="#Other-Commands" accesskey="n" rel="next">Other Commands</a>, Previous: <a href="#Common-Commands" accesskey="p" rel="prev">Common Commands</a>, Up: <a href="#sed-Programs" accesskey="u" rel="up">sed Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="The-s-Command"></a>
<h3 class="section">3.5 The <code>s</code> Command</h3>

<p>The syntax of the <code>s</code> (as in substitute) command is
&lsquo;<samp>s/<var>regexp</var>/<var>replacement</var>/<var>flags</var></samp>&rsquo;.  The <code>/</code>
characters may be uniformly replaced by any other single
character within any given <code>s</code> command.  The <code>/</code>
character (or whatever other character is used in its stead)
can appear in the <var>regexp</var> or <var>replacement</var>
only if it is preceded by a <code>\</code> character.
</p>
<p>The <code>s</code> command is probably the most important in <code>sed</code>
and has a lot of different options.  Its basic concept is simple:
the <code>s</code> command attempts to match the pattern
space against the supplied <var>regexp</var>; if the match is
successful, then that portion of the pattern
space which was matched is replaced with <var>replacement</var>.
</p>
<a name="index-Backreferences_002c-in-regular-expressions"></a>
<a name="index-Parenthesized-substrings"></a>
<p>The <var>replacement</var> can contain <code>\<var>n</var></code> (<var>n</var> being
a number from 1 to 9, inclusive) references, which refer to
the portion of the match which is contained between the <var>n</var>th
<code>\(</code> and its matching <code>\)</code>.
Also, the <var>replacement</var> can contain unescaped <code>&amp;</code>
characters which reference the whole matched portion
of the pattern space.
<a name="index-GNU-extensions_002c-case-modifiers-in-s-commands"></a>
Finally, as a <acronym>GNU</acronym> <code>sed</code> extension, you can include a
special sequence made of a backslash and one of the letters
<code>L</code>, <code>l</code>, <code>U</code>, <code>u</code>, or <code>E</code>.
The meaning is as follows:
</p>
<dl compact="compact">
<dt><code>\L</code></dt>
<dd><p>Turn the replacement
to lowercase until a <code>\U</code> or <code>\E</code> is found,
</p>
</dd>
<dt><code>\l</code></dt>
<dd><p>Turn the
next character to lowercase,
</p>
</dd>
<dt><code>\U</code></dt>
<dd><p>Turn the replacement to uppercase
until a <code>\L</code> or <code>\E</code> is found,
</p>
</dd>
<dt><code>\u</code></dt>
<dd><p>Turn the next character
to uppercase,
</p>
</dd>
<dt><code>\E</code></dt>
<dd><p>Stop case conversion started by <code>\L</code> or <code>\U</code>.
</p></dd>
</dl>

<p>When the <code>g</code> flag is being used, case conversion does not
propagate from one occurrence of the regular expression to
another.  For example, when the following command is executed
with &lsquo;<samp>a-b-</samp>&rsquo; in pattern space:
</p><div class="example">
<pre class="example">s/\(b\?\)-/x\u\1/g
</pre></div>

<p>the output is &lsquo;<samp>axxB</samp>&rsquo;.  When replacing the first &lsquo;<samp>-</samp>&rsquo;,
the &lsquo;<samp>\u</samp>&rsquo; sequence only affects the empty replacement of
&lsquo;<samp>\1</samp>&rsquo;.  It does not affect the <code>x</code> character that is
added to pattern space when replacing <code>b-</code> with <code>xB</code>.
</p>
<p>On the other hand, <code>\l</code> and <code>\u</code> do affect the remainder
of the replacement text if they are followed by an empty substitution.
With &lsquo;<samp>a-b-</samp>&rsquo; in pattern space, the following command:
</p><div class="example">
<pre class="example">s/\(b\?\)-/\u\1x/g
</pre></div>

<p>will replace &lsquo;<samp>-</samp>&rsquo; with &lsquo;<samp>X</samp>&rsquo; (uppercase) and &lsquo;<samp>b-</samp>&rsquo; with
&lsquo;<samp>Bx</samp>&rsquo;.  If this behavior is undesirable, you can prevent it by
adding a &lsquo;<samp>\E</samp>&rsquo; sequence&mdash;after &lsquo;<samp>\1</samp>&rsquo; in this case.
</p>
<p>To include a literal <code>\</code>, <code>&amp;</code>, or newline in the final
replacement, be sure to precede the desired <code>\</code>, <code>&amp;</code>,
or newline in the <var>replacement</var> with a <code>\</code>.
</p>
<a name="index-s-command_002c-option-flags"></a>
<a name="index-Substitution-of-text_002c-options"></a>
<p>The <code>s</code> command can be followed by zero or more of the
following <var>flags</var>:
</p>
<dl compact="compact">
<dt><code>g</code></dt>
<dd><a name="index-Global-substitution"></a>
<a name="index-Replacing-all-text-matching-regexp-in-a-line"></a>
<p>Apply the replacement to <em>all</em> matches to the <var>regexp</var>,
not just the first.
</p>
</dd>
<dt><code><var>number</var></code></dt>
<dd><a name="index-Replacing-only-nth-match-of-regexp-in-a-line"></a>
<p>Only replace the <var>number</var>th match of the <var>regexp</var>.
</p>
<a name="index-GNU-extensions_002c-g-and-number-modifier-interaction-in-s-command"></a>
<a name="index-Mixing-g-and-number-modifiers-in-the-s-command"></a>
<p>Note: the <small>POSIX</small> standard does not specify what should happen
when you mix the <code>g</code> and <var>number</var> modifiers,
and currently there is no widely agreed upon meaning
across <code>sed</code> implementations.
For <acronym>GNU</acronym> <code>sed</code>, the interaction is defined to be:
ignore matches before the <var>number</var>th,
and then match and replace all matches from
the <var>number</var>th on.
</p>
</dd>
<dt><code>p</code></dt>
<dd><a name="index-Text_002c-printing-after-substitution"></a>
<p>If the substitution was made, then print the new pattern space.
</p>
<p>Note: when both the <code>p</code> and <code>e</code> options are specified,
the relative ordering of the two produces very different results.
In general, <code>ep</code> (evaluate then print) is what you want,
but operating the other way round can be useful for debugging.
For this reason, the current version of <acronym>GNU</acronym> <code>sed</code> interprets
specially the presence of <code>p</code> options both before and after
<code>e</code>, printing the pattern space before and after evaluation,
while in general flags for the <code>s</code> command show their
effect just once.  This behavior, although documented, might
change in future versions.
</p>
</dd>
<dt><code>w <var>file-name</var></code></dt>
<dd><a name="index-Text_002c-writing-to-a-file-after-substitution"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstdout-file-1"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstderr-file"></a>
<p>If the substitution was made, then write out the result to the named file.
As a <acronym>GNU</acronym> <code>sed</code> extension, two special values of <var>file-name</var> are
supported: <samp>/dev/stderr</samp>, which writes the result to the standard
error, and <samp>/dev/stdout</samp>, which writes to the standard
output.<a name="DOCF4" href="#FOOT4"><sup>4</sup></a>
</p>
</dd>
<dt><code>e</code></dt>
<dd><a name="index-Evaluate-Bourne_002dshell-commands_002c-after-substitution"></a>
<a name="index-Subprocesses"></a>
<a name="index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands"></a>
<a name="index-GNU-extensions_002c-subprocesses"></a>
<p>This command allows one to pipe input from a shell command
into pattern space.  If a substitution was made, the command
that is found in pattern space is executed and pattern space
is replaced with its output.  A trailing newline is suppressed;
results are undefined if the command to be executed contains
a <small>NUL</small> character.  This is a <acronym>GNU</acronym> <code>sed</code> extension.
</p>
</dd>
<dt><code>I</code></dt>
<dt><code>i</code></dt>
<dd><a name="index-GNU-extensions_002c-I-modifier-1"></a>
<a name="index-Case_002dinsensitive-matching"></a>
<p>The <code>I</code> modifier to regular-expression matching is a <acronym>GNU</acronym>
extension which makes <code>sed</code> match <var>regexp</var> in a
case-insensitive manner.
</p>
</dd>
<dt><code>M</code></dt>
<dt><code>m</code></dt>
<dd><a name="index-GNU-extensions_002c-M-modifier-1"></a>
<p>The <code>M</code> modifier to regular-expression matching is a <acronym>GNU</acronym> <code>sed</code>
extension which directs <acronym>GNU</acronym> <code>sed</code> to match the regular expression
in <cite>multi-line</cite> mode.  The modifier causes <code>^</code> and <code>$</code> to
match respectively (in addition to the normal behavior) the empty string
after a newline, and the empty string before a newline.  There are
special character sequences
(<code>\`</code> and <code>\'</code>)
which always match the beginning or the end of the buffer.
In addition,
the period character does not match a new-line character in
multi-line mode.
</p>

</dd>
</dl>


<hr>
<a name="Other-Commands"></a>
<div class="header">
<p>
Next: <a href="#Programming-Commands" accesskey="n" rel="next">Programming Commands</a>, Previous: <a href="#The-_0022s_0022-Command" accesskey="p" rel="prev">The &quot;s&quot; Command</a>, Up: <a href="#sed-Programs" accesskey="u" rel="up">sed Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Less-Frequently_002dUsed-Commands"></a>
<h3 class="section">3.6 Less Frequently-Used Commands</h3>

<p>Though perhaps less frequently used than those in the previous
section, some very small yet useful <code>sed</code> scripts can be built with
these commands.
</p>
<dl compact="compact">
<dt><code>y/<var>source-chars</var>/<var>dest-chars</var>/</code></dt>
<dd><p>(The <code>/</code> characters may be uniformly replaced by
any other single character within any given <code>y</code> command.)
</p>
<a name="index-y-_0028transliterate_0029-command"></a>
<a name="index-Transliteration"></a>
<p>Transliterate any characters in the pattern space which match
any of the <var>source-chars</var> with the corresponding character
in <var>dest-chars</var>.
</p>
<p>Instances of the <code>/</code> (or whatever other character is used in its stead),
<code>\</code>, or newlines can appear in the <var>source-chars</var> or <var>dest-chars</var>
lists, provide that each instance is escaped by a <code>\</code>.
The <var>source-chars</var> and <var>dest-chars</var> lists <em>must</em>
contain the same number of characters (after de-escaping).
</p>
</dd>
<dt><code>a\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands"></a>
<p>As a <acronym>GNU</acronym> extension, this command accepts two addresses.
</p>
<a name="index-a-_0028append-text-lines_0029-command"></a>
<a name="index-Appending-text-after-a-line"></a>
<a name="index-Text_002c-appending"></a>
<p>Queue the lines of text which follow this command
(each but the last ending with a <code>\</code>,
which are removed from the output)
to be output at the end of the current cycle,
or when the next input line is read.
</p>
<p>Escape sequences in <var>text</var> are processed, so you should
use <code>\\</code> in <var>text</var> to print a single backslash.
</p>
<p>As a <acronym>GNU</acronym> extension, if between the <code>a</code> and the newline there is
other than a whitespace-<code>\</code> sequence, then the text of this line,
starting at the first non-whitespace character after the <code>a</code>,
is taken as the first line of the <var>text</var> block.
(This enables a simplification in scripting a one-line add.)
This extension also works with the <code>i</code> and <code>c</code> commands.
</p>
</dd>
<dt><code>i\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands-1"></a>
<p>As a <acronym>GNU</acronym> extension, this command accepts two addresses.
</p>
<a name="index-i-_0028insert-text-lines_0029-command"></a>
<a name="index-Inserting-text-before-a-line"></a>
<a name="index-Text_002c-insertion"></a>
<p>Immediately output the lines of text which follow this command
(each but the last ending with a <code>\</code>,
which are removed from the output).
</p>
</dd>
<dt><code>c\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><a name="index-c-_0028change-to-text-lines_0029-command"></a>
<a name="index-Replacing-selected-lines-with-other-text"></a>
<p>Delete the lines matching the address or address-range,
and output the lines of text which follow this command
(each but the last ending with a <code>\</code>,
which are removed from the output)
in place of the last line
(or in place of each line, if no addresses were specified).
A new cycle is started after this command is done,
since the pattern space will have been deleted.
</p>
</dd>
<dt><code>=</code></dt>
<dd><a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands-2"></a>
<p>As a <acronym>GNU</acronym> extension, this command accepts two addresses.
</p>
<a name="index-_003d-_0028print-line-number_0029-command"></a>
<a name="index-Printing-line-number"></a>
<a name="index-Line-number_002c-printing"></a>
<p>Print out the current input line number (with a trailing newline).
</p>
</dd>
<dt><code>l <var>n</var></code></dt>
<dd><a name="index-l-_0028list-unambiguously_0029-command"></a>
<a name="index-List-pattern-space"></a>
<a name="index-Printing-text-unambiguously"></a>
<a name="index-Line-length_002c-setting-1"></a>
<a name="index-GNU-extensions_002c-setting-line-length"></a>
<p>Print the pattern space in an unambiguous form:
non-printable characters (and the <code>\</code> character)
are printed in C-style escaped form; long lines are split,
with a trailing <code>\</code> character to indicate the split;
the end of each line is marked with a <code>$</code>.
</p>
<p><var>n</var> specifies the desired line-wrap length;
a length of 0 (zero) means to never wrap long lines.  If omitted,
the default as specified on the command line is used.  The <var>n</var>
parameter is a <acronym>GNU</acronym> <code>sed</code> extension.
</p>
</dd>
<dt><code>r <var>filename</var></code></dt>
<dd><a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands-3"></a>
<p>As a <acronym>GNU</acronym> extension, this command accepts two addresses.
</p>
<a name="index-r-_0028read-file_0029-command"></a>
<a name="index-Read-text-from-a-file"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstdin-file"></a>
<p>Queue the contents of <var>filename</var> to be read and
inserted into the output stream at the end of the current cycle,
or when the next input line is read.
Note that if <var>filename</var> cannot be read, it is treated as
if it were an empty file, without any error indication.
</p>
<p>As a <acronym>GNU</acronym> <code>sed</code> extension, the special value <samp>/dev/stdin</samp>
is supported for the file name, which reads the contents of the
standard input.
</p>
</dd>
<dt><code>w <var>filename</var></code></dt>
<dd><a name="index-w-_0028write-file_0029-command"></a>
<a name="index-Write-to-a-file"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstdout-file-2"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstderr-file-1"></a>
<p>Write the pattern space to <var>filename</var>.
As a <acronym>GNU</acronym> <code>sed</code> extension, two special values of <var>file-name</var> are
supported: <samp>/dev/stderr</samp>, which writes the result to the standard
error, and <samp>/dev/stdout</samp>, which writes to the standard
output.<a name="DOCF5" href="#FOOT5"><sup>5</sup></a>
</p>
<p>The file will be created (or truncated) before the first input line is
read; all <code>w</code> commands (including instances of the <code>w</code> flag
on successful <code>s</code> commands) which refer to the same <var>filename</var>
are output without closing and reopening the file.
</p>
</dd>
<dt><code>D</code></dt>
<dd><a name="index-D-_0028delete-first-line_0029-command"></a>
<a name="index-Delete-first-line-from-pattern-space"></a>
<p>If pattern space contains no newline, start a normal new cycle as if
the <code>d</code> command was issued.  Otherwise, delete text in the pattern
space up to the first newline, and restart cycle with the resultant
pattern space, without reading a new line of input.
</p>
</dd>
<dt><code>N</code></dt>
<dd><a name="index-N-_0028append-Next-line_0029-command"></a>
<a name="index-Next-input-line_002c-append-to-pattern-space"></a>
<a name="index-Append-next-input-line-to-pattern-space"></a>
<p>Add a newline to the pattern space,
then append the next line of input to the pattern space.
If there is no more input then <code>sed</code> exits without processing
any more commands.
</p>
</dd>
<dt><code>P</code></dt>
<dd><a name="index-P-_0028print-first-line_0029-command"></a>
<a name="index-Print-first-line-from-pattern-space"></a>
<p>Print out the portion of the pattern space up to the first newline.
</p>
</dd>
<dt><code>h</code></dt>
<dd><a name="index-h-_0028hold_0029-command"></a>
<a name="index-Copy-pattern-space-into-hold-space"></a>
<a name="index-Replace-hold-space-with-copy-of-pattern-space"></a>
<a name="index-Hold-space_002c-copying-pattern-space-into"></a>
<p>Replace the contents of the hold space with the contents of the pattern space.
</p>
</dd>
<dt><code>H</code></dt>
<dd><a name="index-H-_0028append-Hold_0029-command"></a>
<a name="index-Append-pattern-space-to-hold-space"></a>
<a name="index-Hold-space_002c-appending-from-pattern-space"></a>
<p>Append a newline to the contents of the hold space,
and then append the contents of the pattern space to that of the hold space.
</p>
</dd>
<dt><code>g</code></dt>
<dd><a name="index-g-_0028get_0029-command"></a>
<a name="index-Copy-hold-space-into-pattern-space"></a>
<a name="index-Replace-pattern-space-with-copy-of-hold-space"></a>
<a name="index-Hold-space_002c-copy-into-pattern-space"></a>
<p>Replace the contents of the pattern space with the contents of the hold space.
</p>
</dd>
<dt><code>G</code></dt>
<dd><a name="index-G-_0028appending-Get_0029-command"></a>
<a name="index-Append-hold-space-to-pattern-space"></a>
<a name="index-Hold-space_002c-appending-to-pattern-space"></a>
<p>Append a newline to the contents of the pattern space,
and then append the contents of the hold space to that of the pattern space.
</p>
</dd>
<dt><code>x</code></dt>
<dd><a name="index-x-_0028eXchange_0029-command"></a>
<a name="index-Exchange-hold-space-with-pattern-space"></a>
<a name="index-Hold-space_002c-exchange-with-pattern-space"></a>
<p>Exchange the contents of the hold and pattern spaces.
</p>
</dd>
</dl>


<hr>
<a name="Programming-Commands"></a>
<div class="header">
<p>
Next: <a href="#Extended-Commands" accesskey="n" rel="next">Extended Commands</a>, Previous: <a href="#Other-Commands" accesskey="p" rel="prev">Other Commands</a>, Up: <a href="#sed-Programs" accesskey="u" rel="up">sed Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Commands-for-sed-gurus"></a>
<h3 class="section">3.7 Commands for <code>sed</code> gurus</h3>

<p>In most cases, use of these commands indicates that you are
probably better off programming in something like <code>awk</code>
or Perl.  But occasionally one is committed to sticking
with <code>sed</code>, and these commands can enable one to write
quite convoluted scripts.
</p>
<a name="index-Flow-of-control-in-scripts"></a>
<dl compact="compact">
<dt><code>: <var>label</var></code></dt>
<dd><p>[No addresses allowed.]
</p>
<a name="index-_003a-_0028label_0029-command"></a>
<a name="index-Labels_002c-in-scripts"></a>
<p>Specify the location of <var>label</var> for branch commands.
In all other respects, a no-op.
</p>
</dd>
<dt><code>b <var>label</var></code></dt>
<dd><a name="index-b-_0028branch_0029-command"></a>
<a name="index-Branch-to-a-label_002c-unconditionally"></a>
<a name="index-Goto_002c-in-scripts"></a>
<p>Unconditionally branch to <var>label</var>.
The <var>label</var> may be omitted, in which case the next cycle is started.
</p>
</dd>
<dt><code>t <var>label</var></code></dt>
<dd><a name="index-t-_0028test-and-branch-if-successful_0029-command"></a>
<a name="index-Branch-to-a-label_002c-if-s_002f_002f_002f-succeeded"></a>
<a name="index-Conditional-branch"></a>
<p>Branch to <var>label</var> only if there has been a successful <code>s</code>ubstitution
since the last input line was read or conditional branch was taken.
The <var>label</var> may be omitted, in which case the next cycle is started.
</p>
</dd>
</dl>

<hr>
<a name="Extended-Commands"></a>
<div class="header">
<p>
Next: <a href="#Escapes" accesskey="n" rel="next">Escapes</a>, Previous: <a href="#Programming-Commands" accesskey="p" rel="prev">Programming Commands</a>, Up: <a href="#sed-Programs" accesskey="u" rel="up">sed Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Commands-Specific-to-GNU-sed"></a>
<h3 class="section">3.8 Commands Specific to <acronym>GNU</acronym> <code>sed</code></h3>

<p>These commands are specific to <acronym>GNU</acronym> <code>sed</code>, so you
must use them with care and only when you are sure that
hindering portability is not evil.  They allow you to check
for <acronym>GNU</acronym> <code>sed</code> extensions or to do tasks that are required
quite often, yet are unsupported by standard <code>sed</code>s.
</p>
<dl compact="compact">
<dt><code>e [<var>command</var>]</code></dt>
<dd><a name="index-e-_0028evaluate_0029-command"></a>
<a name="index-Evaluate-Bourne_002dshell-commands"></a>
<a name="index-Subprocesses-1"></a>
<a name="index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands-1"></a>
<a name="index-GNU-extensions_002c-subprocesses-1"></a>
<p>This command allows one to pipe input from a shell command
into pattern space.  Without parameters, the <code>e</code> command
executes the command that is found in pattern space and
replaces the pattern space with the output; a trailing newline
is suppressed.
</p>
<p>If a parameter is specified, instead, the <code>e</code> command
interprets it as a command and sends its output to the output stream.
The command can run across multiple lines, all but the last ending with
a back-slash.
</p>
<p>In both cases, the results are undefined if the command to be
executed contains a <small>NUL</small> character.
</p>
<p>Note that, unlike the <code>r</code> command, the output of the command will
be printed immediately; the <code>r</code> command instead delays the output
to the end of the current cycle.
</p>
</dd>
<dt><code>F</code></dt>
<dd><a name="index-F-_0028File-name_0029-command"></a>
<a name="index-Printing-file-name"></a>
<a name="index-File-name_002c-printing"></a>
<p>Print out the file name of the current input file (with a trailing
newline).
</p>
</dd>
<dt><code>L <var>n</var></code></dt>
<dd><a name="index-L-_0028fLow-paragraphs_0029-command"></a>
<a name="index-Reformat-pattern-space"></a>
<a name="index-Reformatting-paragraphs"></a>
<a name="index-GNU-extensions_002c-reformatting-paragraphs"></a>
<a name="index-GNU-extensions_002c-L-command"></a>
<p>This <acronym>GNU</acronym> <code>sed</code> extension fills and joins lines in pattern space
to produce output lines of (at most) <var>n</var> characters, like
<code>fmt</code> does; if <var>n</var> is omitted, the default as specified
on the command line is used.  This command is considered a failed
experiment and unless there is enough request (which seems unlikely)
will be removed in future versions.
</p>

</dd>
<dt><code>Q [<var>exit-code</var>]</code></dt>
<dd><p>This command only accepts a single address.
</p>
<a name="index-Q-_0028silent-Quit_0029-command"></a>
<a name="index-GNU-extensions_002c-quitting-silently"></a>
<a name="index-GNU-extensions_002c-returning-an-exit-code-1"></a>
<a name="index-Quitting-1"></a>
<p>This command is the same as <code>q</code>, but will not print the
contents of pattern space.  Like <code>q</code>, it provides the
ability to return an exit code to the caller.
</p>
<p>This command can be useful because the only alternative ways
to accomplish this apparently trivial function are to use
the <samp>-n</samp> option (which can unnecessarily complicate
your script) or resorting to the following snippet, which
wastes time by reading the whole file without any visible effect:
</p>
<div class="example">
<pre class="example">:eat
$d       <i><span class="roman">Quit silently on the last line</span></i>
N        <i><span class="roman">Read another line, silently</span></i>
g        <i><span class="roman">Overwrite pattern space each time to save memory</span></i>
b eat
</pre></div>

</dd>
<dt><code>R <var>filename</var></code></dt>
<dd><a name="index-R-_0028read-line_0029-command"></a>
<a name="index-Read-text-from-a-file-1"></a>
<a name="index-GNU-extensions_002c-reading-a-file-a-line-at-a-time"></a>
<a name="index-GNU-extensions_002c-R-command"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstdin-file-1"></a>
<p>Queue a line of <var>filename</var> to be read and
inserted into the output stream at the end of the current cycle,
or when the next input line is read.
Note that if <var>filename</var> cannot be read, or if its end is
reached, no line is appended, without any error indication.
</p>
<p>As with the <code>r</code> command, the special value <samp>/dev/stdin</samp>
is supported for the file name, which reads a line from the
standard input.
</p>
</dd>
<dt><code>T <var>label</var></code></dt>
<dd><a name="index-T-_0028test-and-branch-if-failed_0029-command"></a>
<a name="index-GNU-extensions_002c-branch-if-s_002f_002f_002f-failed"></a>
<a name="index-Branch-to-a-label_002c-if-s_002f_002f_002f-failed"></a>
<a name="index-Conditional-branch-1"></a>
<p>Branch to <var>label</var> only if there have been no successful
<code>s</code>ubstitutions since the last input line was read or
conditional branch was taken. The <var>label</var> may be omitted,
in which case the next cycle is started.
</p>
</dd>
<dt><code>v <var>version</var></code></dt>
<dd><a name="index-v-_0028version_0029-command"></a>
<a name="index-GNU-extensions_002c-checking-for-their-presence"></a>
<a name="index-Requiring-GNU-sed"></a>
<p>This command does nothing, but makes <code>sed</code> fail if
<acronym>GNU</acronym> <code>sed</code> extensions are not supported, simply because other
versions of <code>sed</code> do not implement it.  In addition, you
can specify the version of <code>sed</code> that your script
requires, such as <code>4.0.5</code>.  The default is <code>4.0</code>
because that is the first version that implemented this command.
</p>
<p>This command enables all <acronym>GNU</acronym> extensions even if
<code>POSIXLY_CORRECT</code> is set in the environment.
</p>
</dd>
<dt><code>W <var>filename</var></code></dt>
<dd><a name="index-W-_0028write-first-line_0029-command"></a>
<a name="index-Write-first-line-to-a-file"></a>
<a name="index-GNU-extensions_002c-writing-first-line-to-a-file"></a>
<p>Write to the given filename the portion of the pattern space up to
the first newline.  Everything said under the <code>w</code> command about
file handling holds here too.
</p>
</dd>
<dt><code>z</code></dt>
<dd><a name="index-z-_0028Zap_0029-command"></a>
<a name="index-GNU-extensions_002c-emptying-pattern-space"></a>
<a name="index-Emptying-pattern-space"></a>
<p>This command empties the content of pattern space.  It is
usually the same as &lsquo;<samp>s/.*//</samp>&rsquo;, but is more efficient
and works in the presence of invalid multibyte sequences
in the input stream.  <small>POSIX</small> mandates that such sequences
are <em>not</em> matched by &lsquo;<samp>.</samp>&rsquo;, so that there is no portable
way to clear <code>sed</code>&rsquo;s buffers in the middle of the
script in most multibyte locales (including UTF-8 locales).
</p></dd>
</dl>

<hr>
<a name="Escapes"></a>
<div class="header">
<p>
Previous: <a href="#Extended-Commands" accesskey="p" rel="prev">Extended Commands</a>, Up: <a href="#sed-Programs" accesskey="u" rel="up">sed Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="GNU-Extensions-for-Escapes-in-Regular-Expressions"></a>
<h3 class="section">3.9 <acronym>GNU</acronym> Extensions for Escapes in Regular Expressions</h3>

<a name="index-GNU-extensions_002c-special-escapes"></a>
<p>Until this chapter, we have only encountered escapes of the form
&lsquo;<samp>\^</samp>&rsquo;, which tell <code>sed</code> not to interpret the circumflex
as a special character, but rather to take it literally.  For
example, &lsquo;<samp>\*</samp>&rsquo; matches a single asterisk rather than zero
or more backslashes.
</p>
<a name="index-POSIXLY_005fCORRECT-behavior_002c-escapes"></a>
<p>This chapter introduces another kind of escape<a name="DOCF6" href="#FOOT6"><sup>6</sup></a>&mdash;that
is, escapes that are applied to a character or sequence of characters
that ordinarily are taken literally, and that <code>sed</code> replaces
with a special character.  This provides a way
of encoding non-printable characters in patterns in a visible manner.
There is no restriction on the appearance of non-printing characters
in a <code>sed</code> script but when a script is being prepared in the
shell or by text editing, it is usually easier to use one of
the following escape sequences than the binary character it
represents:
</p>
<p>The list of these escapes is:
</p>
<dl compact="compact">
<dt><code>\a</code></dt>
<dd><p>Produces or matches a <small>BEL</small> character, that is an &ldquo;alert&rdquo; (<small>ASCII</small> 7).
</p>
</dd>
<dt><code>\f</code></dt>
<dd><p>Produces or matches a form feed (<small>ASCII</small> 12).
</p>
</dd>
<dt><code>\n</code></dt>
<dd><p>Produces or matches a newline (<small>ASCII</small> 10).
</p>
</dd>
<dt><code>\r</code></dt>
<dd><p>Produces or matches a carriage return (<small>ASCII</small> 13).
</p>
</dd>
<dt><code>\t</code></dt>
<dd><p>Produces or matches a horizontal tab (<small>ASCII</small> 9).
</p>
</dd>
<dt><code>\v</code></dt>
<dd><p>Produces or matches a so called &ldquo;vertical tab&rdquo; (<small>ASCII</small> 11).
</p>
</dd>
<dt><code>\c<var>x</var></code></dt>
<dd><p>Produces or matches <kbd><small>CONTROL</small>-<var>x</var></kbd>, where <var>x</var> is
any character.  The precise effect of &lsquo;<samp>\c<var>x</var></samp>&rsquo; is as follows:
if <var>x</var> is a lower case letter, it is converted to upper case.
Then bit 6 of the character (hex 40) is inverted.  Thus &lsquo;<samp>\cz</samp>&rsquo; becomes
hex 1A, but &lsquo;<samp>\c{</samp>&rsquo; becomes hex 3B, while &lsquo;<samp>\c;</samp>&rsquo; becomes hex 7B.
</p>
</dd>
<dt><code>\d<var>xxx</var></code></dt>
<dd><p>Produces or matches a character whose decimal <small>ASCII</small> value is <var>xxx</var>.
</p>
</dd>
<dt><code>\o<var>xxx</var></code></dt>
<dd><p>Produces or matches a character whose octal <small>ASCII</small> value is <var>xxx</var>.
</p>
</dd>
<dt><code>\x<var>xx</var></code></dt>
<dd><p>Produces or matches a character whose hexadecimal <small>ASCII</small> value is <var>xx</var>.
</p></dd>
</dl>

<p>&lsquo;<samp>\b</samp>&rsquo; (backspace) was omitted because of the conflict with
the existing &ldquo;word boundary&rdquo; meaning.
</p>
<p>Other escapes match a particular character class and are valid only in
regular expressions:
</p>
<dl compact="compact">
<dt><code>\w</code></dt>
<dd><p>Matches any &ldquo;word&rdquo; character.  A &ldquo;word&rdquo; character is any
letter or digit or the underscore character.
</p>
</dd>
<dt><code>\W</code></dt>
<dd><p>Matches any &ldquo;non-word&rdquo; character.
</p>
</dd>
<dt><code>\b</code></dt>
<dd><p>Matches a word boundary; that is it matches if the character
to the left is a &ldquo;word&rdquo; character and the character to the
right is a &ldquo;non-word&rdquo; character, or vice-versa.
</p>
</dd>
<dt><code>\B</code></dt>
<dd><p>Matches everywhere but on a word boundary; that is it matches
if the character to the left and the character to the right
are either both &ldquo;word&rdquo; characters or both &ldquo;non-word&rdquo;
characters.
</p>
</dd>
<dt><code>\`</code></dt>
<dd><p>Matches only at the start of pattern space.  This is different
from <code>^</code> in multi-line mode.
</p>
</dd>
<dt><code>\'</code></dt>
<dd><p>Matches only at the end of pattern space.  This is different
from <code>$</code> in multi-line mode.
</p>
</dd>
</dl>

<hr>
<a name="Examples"></a>
<div class="header">
<p>
Next: <a href="#Limitations" accesskey="n" rel="next">Limitations</a>, Previous: <a href="#sed-Programs" accesskey="p" rel="prev">sed Programs</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Some-Sample-Scripts"></a>
<h2 class="chapter">4 Some Sample Scripts</h2>

<p>Here are some <code>sed</code> scripts to guide you in the art of mastering
<code>sed</code>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">Some exotic examples:
</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#Centering-lines" accesskey="1">Centering lines</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Increment-a-number" accesskey="2">Increment a number</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Rename-files-to-lower-case" accesskey="3">Rename files to lower case</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Print-bash-environment" accesskey="4">Print bash environment</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Reverse-chars-of-lines" accesskey="5">Reverse chars of lines</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Emulating standard utilities:
</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#tac" accesskey="6">tac</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Reverse lines of files
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cat-_002dn" accesskey="7">cat -n</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Numbering lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cat-_002db" accesskey="8">cat -b</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Numbering non-blank lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#wc-_002dc" accesskey="9">wc -c</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Counting chars
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#wc-_002dw">wc -w</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Counting words
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#wc-_002dl">wc -l</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Counting lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#head">head</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Printing the first lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#tail">tail</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Printing the last lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#uniq">uniq</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Make duplicate lines unique
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#uniq-_002dd">uniq -d</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Print duplicated lines of input
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#uniq-_002du">uniq -u</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Remove all duplicated lines
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#cat-_002ds">cat -s</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Squeezing blank lines
</td></tr>
</table>

<hr>
<a name="Centering-lines"></a>
<div class="header">
<p>
Next: <a href="#Increment-a-number" accesskey="n" rel="next">Increment a number</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Centering-Lines"></a>
<h3 class="section">4.1 Centering Lines</h3>

<p>This script centers all lines of a file on a 80 columns width.
To change that width, the number in <code>\{&hellip;\}</code> must be
replaced, and the number of added spaces also must be changed.
</p>
<p>Note how the buffer commands are used to separate parts in
the regular expressions to be matched&mdash;this is a common
technique.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># Put 80 spaces in the buffer
1 {
  x
  s/^$/          /
  s/^.*$/&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;/
  x
}
</pre><pre class="example">
</pre><pre class="example"># del leading and trailing spaces
y/<kbd>tab</kbd>/ /
s/^ *//
s/ *$//
</pre><pre class="example">
</pre><pre class="example"># add a newline and 80 spaces to end of line
G
</pre><pre class="example">
</pre><pre class="example"># keep first 81 chars (80 + a newline)
s/^\(.\{81\}\).*$/\1/
</pre><pre class="example">
</pre><pre class="example"># \2 matches half of the spaces, which are moved to the beginning
s/^\(.*\)\n\(.*\)\2/\2\1/
</pre></div>

<hr>
<a name="Increment-a-number"></a>
<div class="header">
<p>
Next: <a href="#Rename-files-to-lower-case" accesskey="n" rel="next">Rename files to lower case</a>, Previous: <a href="#Centering-lines" accesskey="p" rel="prev">Centering lines</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Increment-a-Number"></a>
<h3 class="section">4.2 Increment a Number</h3>

<p>This script is one of a few that demonstrate how to do arithmetic
in <code>sed</code>.  This is indeed possible,<a name="DOCF7" href="#FOOT7"><sup>7</sup></a> but must be done manually.
</p>
<p>To increment one number you just add 1 to last digit, replacing
it by the following digit.  There is one exception: when the digit
is a nine the previous digits must be also incremented until you
don&rsquo;t have a nine.
</p>
<p>This solution by Bruno Haible is very clever and smart because
it uses a single buffer; if you don&rsquo;t have this limitation, the
algorithm used in <a href="#cat-_002dn">Numbering lines</a>, is faster.
It works by replacing trailing nines with an underscore, then
using multiple <code>s</code> commands to increment the last digit,
and then again substituting underscores with zeros.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

/[^0-9]/ d

</pre><pre class="example"># replace all trailing 9s by _ (any other character except digits, could
# be used)
:d
s/9\(_*\)$/_\1/
td
</pre><pre class="example">
</pre><pre class="example"># incr last digit only.  The first line adds a most-significant
# digit of 1 if we have to add a digit.
</pre><pre class="example">
</pre><pre class="example">s/^\(_*\)$/1\1/; tn
s/8\(_*\)$/9\1/; tn
s/7\(_*\)$/8\1/; tn
s/6\(_*\)$/7\1/; tn
s/5\(_*\)$/6\1/; tn
s/4\(_*\)$/5\1/; tn
s/3\(_*\)$/4\1/; tn
s/2\(_*\)$/3\1/; tn
s/1\(_*\)$/2\1/; tn
s/0\(_*\)$/1\1/; tn
</pre><pre class="example">
</pre><pre class="example">:n
y/_/0/
</pre></div>

<hr>
<a name="Rename-files-to-lower-case"></a>
<div class="header">
<p>
Next: <a href="#Print-bash-environment" accesskey="n" rel="next">Print bash environment</a>, Previous: <a href="#Increment-a-number" accesskey="p" rel="prev">Increment a number</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Rename-Files-to-Lower-Case"></a>
<h3 class="section">4.3 Rename Files to Lower Case</h3>

<p>This is a pretty strange use of <code>sed</code>.  We transform text, and
transform it to be shell commands, then just feed them to shell.
Don&rsquo;t worry, even worse hacks are done when using <code>sed</code>; I have
seen a script converting the output of <code>date</code> into a <code>bc</code>
program!
</p>
<p>The main body of this is the <code>sed</code> script, which remaps the name
from lower to upper (or vice-versa) and even checks out 
if the remapped name is the same as the original name.
Note how the script is parameterized using shell
variables and proper quoting.
</p>
<div class="example">
<pre class="example">#! /bin/sh
# rename files to lower/upper case... 
#
# usage: 
#    move-to-lower * 
#    move-to-upper * 
# or
#    move-to-lower -R .
#    move-to-upper -R .
#
</pre><pre class="example">
</pre><pre class="example">help()
{
        cat &lt;&lt; eof
Usage: $0 [-n] [-r] [-h] files...
</pre><pre class="example">
</pre><pre class="example">-n      do nothing, only see what would be done
-R      recursive (use find)
-h      this message
files   files to remap to lower case
</pre><pre class="example">
</pre><pre class="example">Examples:
       $0 -n *        (see if everything is ok, then...)
       $0 *
</pre><pre class="example">
       $0 -R .

</pre><pre class="example">eof
}
</pre><pre class="example">
</pre><pre class="example">apply_cmd='sh'
finder='echo &quot;$@&quot; | tr &quot; &quot; &quot;\n&quot;'
files_only=
</pre><pre class="example">
</pre><pre class="example">while :
do
    case &quot;$1&quot; in 
        -n) apply_cmd='cat' ;;
        -R) finder='find &quot;$@&quot; -type f';;
        -h) help ; exit 1 ;;
        *) break ;;
    esac
    shift
done
</pre><pre class="example">
</pre><pre class="example">if [ -z &quot;$1&quot; ]; then
        echo Usage: $0 [-h] [-n] [-r] files...
        exit 1
fi
</pre><pre class="example">
</pre><pre class="example">LOWER='abcdefghijklmnopqrstuvwxyz'
UPPER='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
</pre><pre class="example">
</pre><pre class="example">case `basename $0` in
        *upper*) TO=$UPPER; FROM=$LOWER ;;
        *)       FROM=$UPPER; TO=$LOWER ;;
esac
</pre><pre class="example">
eval $finder | sed -n '

</pre><pre class="example"># remove all trailing slashes
s/\/*$//
</pre><pre class="example">
</pre><pre class="example"># add ./ if there is no path, only a filename
/\//! s/^/.\//
</pre><pre class="example">
</pre><pre class="example"># save path+filename
h
</pre><pre class="example">
</pre><pre class="example"># remove path
s/.*\///
</pre><pre class="example">
</pre><pre class="example"># do conversion only on filename
y/'$FROM'/'$TO'/
</pre><pre class="example">
</pre><pre class="example"># now line contains original path+file, while
# hold space contains the new filename
x
</pre><pre class="example">
</pre><pre class="example"># add converted file name to line, which now contains
# path/file-name\nconverted-file-name
G
</pre><pre class="example">
</pre><pre class="example"># check if converted file name is equal to original file name,
# if it is, do not print anything
/^.*\/\(.*\)\n\1/b
</pre><pre class="example">
</pre><pre class="example"># escape special characters for the shell
s/[&quot;$`\\]/\\&amp;/g
</pre><pre class="example">
</pre><pre class="example"># now, transform path/fromfile\n, into
# mv path/fromfile path/tofile and print it
s/^\(.*\/\)\(.*\)\n\(.*\)$/mv &quot;\1\2&quot; &quot;\1\3&quot;/p
</pre><pre class="example">
' | $apply_cmd
</pre></div>

<hr>
<a name="Print-bash-environment"></a>
<div class="header">
<p>
Next: <a href="#Reverse-chars-of-lines" accesskey="n" rel="next">Reverse chars of lines</a>, Previous: <a href="#Rename-files-to-lower-case" accesskey="p" rel="prev">Rename files to lower case</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Print-bash-Environment"></a>
<h3 class="section">4.4 Print <code>bash</code> Environment</h3>

<p>This script strips the definition of the shell functions
from the output of the <code>set</code> Bourne-shell command.
</p>
<div class="example">
<pre class="example">#!/bin/sh

</pre><pre class="example">set | sed -n '
:x
</pre><pre class="example">
</pre><pre class="example"># if no occurrence of &lsquo;<samp>=()</samp>&rsquo; print and load next line
/=()/! { p; b; }
/ () $/! { p; b; }
</pre><pre class="example">
</pre><pre class="example"># possible start of functions section
# save the line in case this is a var like FOO=&quot;() &quot;
h
</pre><pre class="example">
</pre><pre class="example"># if the next line has a brace, we quit because
# nothing comes after functions
n
/^{/ q
</pre><pre class="example">
</pre><pre class="example"># print the old line
x; p
</pre><pre class="example">
</pre><pre class="example"># work on the new line now
x; bx
'
</pre></div>

<hr>
<a name="Reverse-chars-of-lines"></a>
<div class="header">
<p>
Next: <a href="#tac" accesskey="n" rel="next">tac</a>, Previous: <a href="#Print-bash-environment" accesskey="p" rel="prev">Print bash environment</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Reverse-Characters-of-Lines"></a>
<h3 class="section">4.5 Reverse Characters of Lines</h3>

<p>This script can be used to reverse the position of characters
in lines.  The technique moves two characters at a time, hence
it is faster than more intuitive implementations.
</p>
<p>Note the <code>tx</code> command before the definition of the label.
This is often needed to reset the flag that is tested by
the <code>t</code> command.
</p>
<p>Imaginative readers will find uses for this script.  An example
is reversing the output of <code>banner</code>.<a name="DOCF8" href="#FOOT8"><sup>8</sup></a>
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

/../! b

</pre><pre class="example"># Reverse a line.  Begin embedding the line between two newlines
s/^.*$/\
&amp;\
/
</pre><pre class="example">
</pre><pre class="example"># Move first character at the end.  The regexp matches until
# there are zero or one characters between the markers
tx
:x
s/\(\n.\)\(.*\)\(.\n\)/\3\2\1/
tx
</pre><pre class="example">
</pre><pre class="example"># Remove the newline markers
s/\n//g
</pre></div>

<hr>
<a name="tac"></a>
<div class="header">
<p>
Next: <a href="#cat-_002dn" accesskey="n" rel="next">cat -n</a>, Previous: <a href="#Reverse-chars-of-lines" accesskey="p" rel="prev">Reverse chars of lines</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Reverse-Lines-of-Files"></a>
<h3 class="section">4.6 Reverse Lines of Files</h3>

<p>This one begins a series of totally useless (yet interesting)
scripts emulating various Unix commands.  This, in particular,
is a <code>tac</code> workalike.
</p>
<p>Note that on implementations other than <acronym>GNU</acronym> <code>sed</code>
this script might easily overflow internal buffers.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

# reverse all lines of input, i.e. first line became last, ...

</pre><pre class="example"># from the second line, the buffer (which contains all previous lines)
# is *appended* to current line, so, the order will be reversed
1! G
</pre><pre class="example">
</pre><pre class="example"># on the last line we're done -- print everything
$ p
</pre><pre class="example">
</pre><pre class="example"># store everything on the buffer again
h
</pre></div>

<hr>
<a name="cat-_002dn"></a>
<div class="header">
<p>
Next: <a href="#cat-_002db" accesskey="n" rel="next">cat -b</a>, Previous: <a href="#tac" accesskey="p" rel="prev">tac</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Numbering-Lines"></a>
<h3 class="section">4.7 Numbering Lines</h3>

<p>This script replaces &lsquo;<samp>cat -n</samp>&rsquo;; in fact it formats its output
exactly like <acronym>GNU</acronym> <code>cat</code> does.
</p>
<p>Of course this is completely useless and for two reasons:  first,
because somebody else did it in C, second, because the following
Bourne-shell script could be used for the same purpose and would
be much faster:
</p>
<div class="example">
<pre class="example">#! /bin/sh
sed -e &quot;=&quot; $@ | sed -e '
  s/^/      /
  N
  s/^ *\(......\)\n/\1  /
'
</pre></div>

<p>It uses <code>sed</code> to print the line number, then groups lines two
by two using <code>N</code>.  Of course, this script does not teach as much as
the one presented below.
</p>
<p>The algorithm used for incrementing uses both buffers, so the line
is printed as soon as possible and then discarded.  The number
is split so that changing digits go in a buffer and unchanged ones go
in the other; the changed digits are modified in a single step
(using a <code>y</code> command).  The line number for the next line
is then composed and stored in the hold space, to be used in the
next iteration.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># Prime the pump on the first line
x
/^$/ s/^.*$/1/
</pre><pre class="example">
</pre><pre class="example"># Add the correct line number before the pattern
G
h
</pre><pre class="example">
</pre><pre class="example"># Format it and print it
s/^/      /
s/^ *\(......\)\n/\1  /p
</pre><pre class="example">
</pre><pre class="example"># Get the line number from hold space; add a zero
# if we're going to add a digit on the next line
g
s/\n.*$//
/^9*$/ s/^/0/
</pre><pre class="example">
</pre><pre class="example"># separate changing/unchanged digits with an x
s/.9*$/x&amp;/
</pre><pre class="example">
</pre><pre class="example"># keep changing digits in hold space
h
s/^.*x//
y/0123456789/1234567890/
x
</pre><pre class="example">
</pre><pre class="example"># keep unchanged digits in pattern space
s/x.*$//
</pre><pre class="example">
</pre><pre class="example"># compose the new number, remove the newline implicitly added by G
G
s/\n//
h
</pre></div>

<hr>
<a name="cat-_002db"></a>
<div class="header">
<p>
Next: <a href="#wc-_002dc" accesskey="n" rel="next">wc -c</a>, Previous: <a href="#cat-_002dn" accesskey="p" rel="prev">cat -n</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Numbering-Non_002dblank-Lines"></a>
<h3 class="section">4.8 Numbering Non-blank Lines</h3>

<p>Emulating &lsquo;<samp>cat -b</samp>&rsquo; is almost the same as &lsquo;<samp>cat -n</samp>&rsquo;&mdash;we only
have to select which lines are to be numbered and which are not.
</p>
<p>The part that is common to this script and the previous one is
not commented to show how important it is to comment <code>sed</code>
scripts properly...
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example">/^$/ {
  p
  b
}
</pre><pre class="example">
</pre><pre class="example"># Same as cat -n from now
x
/^$/ s/^.*$/1/
G
h
s/^/      /
s/^ *\(......\)\n/\1  /p
x
s/\n.*$//
/^9*$/ s/^/0/
s/.9*$/x&amp;/
h
s/^.*x//
y/0123456789/1234567890/
x
s/x.*$//
G
s/\n//
h
</pre></div>

<hr>
<a name="wc-_002dc"></a>
<div class="header">
<p>
Next: <a href="#wc-_002dw" accesskey="n" rel="next">wc -w</a>, Previous: <a href="#cat-_002db" accesskey="p" rel="prev">cat -b</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Counting-Characters"></a>
<h3 class="section">4.9 Counting Characters</h3>

<p>This script shows another way to do arithmetic with <code>sed</code>.
In this case we have to add possibly large numbers, so implementing
this by successive increments would not be feasible (and possibly
even more complicated to contrive than this script).
</p>
<p>The approach is to map numbers to letters, kind of an abacus
implemented with <code>sed</code>.  &lsquo;<samp>a</samp>&rsquo;s are units, &lsquo;<samp>b</samp>&rsquo;s are
tens and so on: we simply add the number of characters
on the current line as units, and then propagate the carry
to tens, hundreds, and so on.
</p>
<p>As usual, running totals are kept in hold space.
</p>
<p>On the last line, we convert the abacus form back to decimal.
For the sake of variety, this is done with a loop rather than
with some 80 <code>s</code> commands<a name="DOCF9" href="#FOOT9"><sup>9</sup></a>: first we
convert units, removing &lsquo;<samp>a</samp>&rsquo;s from the number; then we
rotate letters so that tens become &lsquo;<samp>a</samp>&rsquo;s, and so on
until no more letters remain.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># Add n+1 a's to hold space (+1 is for the newline)
s/./a/g
H
x
s/\n/a/
</pre><pre class="example">
</pre><pre class="example"># Do the carry.  The t's and b's are not necessary,
# but they do speed up the thing
t a
: a;  s/aaaaaaaaaa/b/g; t b; b done
: b;  s/bbbbbbbbbb/c/g; t c; b done
: c;  s/cccccccccc/d/g; t d; b done
: d;  s/dddddddddd/e/g; t e; b done
: e;  s/eeeeeeeeee/f/g; t f; b done
: f;  s/ffffffffff/g/g; t g; b done
: g;  s/gggggggggg/h/g; t h; b done
: h;  s/hhhhhhhhhh//g
</pre><pre class="example">
</pre><pre class="example">: done
$! {
  h
  b
}
</pre><pre class="example">
# On the last line, convert back to decimal

</pre><pre class="example">: loop
/a/! s/[b-h]*/&amp;0/
s/aaaaaaaaa/9/
s/aaaaaaaa/8/
s/aaaaaaa/7/
s/aaaaaa/6/
s/aaaaa/5/
s/aaaa/4/
s/aaa/3/
s/aa/2/
s/a/1/
</pre><pre class="example">
</pre><pre class="example">: next
y/bcdefgh/abcdefg/
/[a-h]/ b loop
p
</pre></div>

<hr>
<a name="wc-_002dw"></a>
<div class="header">
<p>
Next: <a href="#wc-_002dl" accesskey="n" rel="next">wc -l</a>, Previous: <a href="#wc-_002dc" accesskey="p" rel="prev">wc -c</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Counting-Words"></a>
<h3 class="section">4.10 Counting Words</h3>

<p>This script is almost the same as the previous one, once each
of the words on the line is converted to a single &lsquo;<samp>a</samp>&rsquo;
(in the previous script each letter was changed to an &lsquo;<samp>a</samp>&rsquo;).
</p>
<p>It is interesting that real <code>wc</code> programs have optimized
loops for &lsquo;<samp>wc -c</samp>&rsquo;, so they are much slower at counting
words rather than characters.  This script&rsquo;s bottleneck,
instead, is arithmetic, and hence the word-counting one
is faster (it has to manage smaller numbers).
</p>
<p>Again, the common parts are not commented to show the importance
of commenting <code>sed</code> scripts.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># Convert words to a's
s/[ <kbd>tab</kbd>][ <kbd>tab</kbd>]*/ /g
s/^/ /
s/ [^ ][^ ]*/a /g
s/ //g
</pre><pre class="example">
</pre><pre class="example"># Append them to hold space
H
x
s/\n//
</pre><pre class="example">
</pre><pre class="example"># From here on it is the same as in wc -c.
/aaaaaaaaaa/! bx;   s/aaaaaaaaaa/b/g
/bbbbbbbbbb/! bx;   s/bbbbbbbbbb/c/g
/cccccccccc/! bx;   s/cccccccccc/d/g
/dddddddddd/! bx;   s/dddddddddd/e/g
/eeeeeeeeee/! bx;   s/eeeeeeeeee/f/g
/ffffffffff/! bx;   s/ffffffffff/g/g
/gggggggggg/! bx;   s/gggggggggg/h/g
s/hhhhhhhhhh//g
:x
$! { h; b; }
:y
/a/! s/[b-h]*/&amp;0/
s/aaaaaaaaa/9/
s/aaaaaaaa/8/
s/aaaaaaa/7/
s/aaaaaa/6/
s/aaaaa/5/
s/aaaa/4/
s/aaa/3/
s/aa/2/
s/a/1/
y/bcdefgh/abcdefg/
/[a-h]/ by
p
</pre></div>

<hr>
<a name="wc-_002dl"></a>
<div class="header">
<p>
Next: <a href="#head" accesskey="n" rel="next">head</a>, Previous: <a href="#wc-_002dw" accesskey="p" rel="prev">wc -w</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Counting-Lines"></a>
<h3 class="section">4.11 Counting Lines</h3>

<p>No strange things are done now, because <code>sed</code> gives us
&lsquo;<samp>wc -l</samp>&rsquo; functionality for free!!! Look:
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf
$=
</pre></div>

<hr>
<a name="head"></a>
<div class="header">
<p>
Next: <a href="#tail" accesskey="n" rel="next">tail</a>, Previous: <a href="#wc-_002dl" accesskey="p" rel="prev">wc -l</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Printing-the-First-Lines"></a>
<h3 class="section">4.12 Printing the First Lines</h3>

<p>This script is probably the simplest useful <code>sed</code> script.
It displays the first 10 lines of input; the number of displayed
lines is right before the <code>q</code> command.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f
10q
</pre></div>

<hr>
<a name="tail"></a>
<div class="header">
<p>
Next: <a href="#uniq" accesskey="n" rel="next">uniq</a>, Previous: <a href="#head" accesskey="p" rel="prev">head</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Printing-the-Last-Lines"></a>
<h3 class="section">4.13 Printing the Last Lines</h3>

<p>Printing the last <var>n</var> lines rather than the first is more complex
but indeed possible.  <var>n</var> is encoded in the second line, before
the bang character.
</p>
<p>This script is similar to the <code>tac</code> script in that it keeps the
final output in the hold space and prints it at the end:
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example">1! {; H; g; }
1,10 !s/[^\n]*\n//
$p
h
</pre></div>

<p>Mainly, the scripts keeps a window of 10 lines and slides it
by adding a line and deleting the oldest (the substitution command
on the second line works like a <code>D</code> command but does not
restart the loop).
</p>
<p>The &ldquo;sliding window&rdquo; technique is a very powerful way to write
efficient and complex <code>sed</code> scripts, because commands like
<code>P</code> would require a lot of work if implemented manually.
</p>
<p>To introduce the technique, which is fully demonstrated in the
rest of this chapter and is based on the <code>N</code>, <code>P</code>
and <code>D</code> commands, here is an implementation of <code>tail</code>
using a simple &ldquo;sliding window.&rdquo;
</p>
<p>This looks complicated but in fact the working is the same as
the last script: after we have kicked in the appropriate number
of lines, however, we stop using the hold space to keep inter-line
state, and instead use <code>N</code> and <code>D</code> to slide pattern
space by one line:
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example">1h
2,10 {; H; g; }
$q
1,9d
N
D
</pre></div>

<p>Note how the first, second and fourth line are inactive after
the first ten lines of input.  After that, all the script does
is: exiting on the last line of input, appending the next input
line to pattern space, and removing the first line.
</p>
<hr>
<a name="uniq"></a>
<div class="header">
<p>
Next: <a href="#uniq-_002dd" accesskey="n" rel="next">uniq -d</a>, Previous: <a href="#tail" accesskey="p" rel="prev">tail</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Make-Duplicate-Lines-Unique"></a>
<h3 class="section">4.14 Make Duplicate Lines Unique</h3>

<p>This is an example of the art of using the <code>N</code>, <code>P</code>
and <code>D</code> commands, probably the most difficult to master.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f
h
</pre><pre class="example">
</pre><pre class="example">:b
# On the last line, print and exit
$b
N
/^\(.*\)\n\1$/ {
    # The two lines are identical.  Undo the effect of
    # the n command.
    g
    bb
}
</pre><pre class="example">
</pre><pre class="example"># If the <code>N</code> command had added the last line, print and exit
$b
</pre><pre class="example">
</pre><pre class="example"># The lines are different; print the first and go
# back working on the second.
P
D
</pre></div>

<p>As you can see, we mantain a 2-line window using <code>P</code> and <code>D</code>.
This technique is often used in advanced <code>sed</code> scripts.
</p>
<hr>
<a name="uniq-_002dd"></a>
<div class="header">
<p>
Next: <a href="#uniq-_002du" accesskey="n" rel="next">uniq -u</a>, Previous: <a href="#uniq" accesskey="p" rel="prev">uniq</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Print-Duplicated-Lines-of-Input"></a>
<h3 class="section">4.15 Print Duplicated Lines of Input</h3>

<p>This script prints only duplicated lines, like &lsquo;<samp>uniq -d</samp>&rsquo;.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example">$b
N
/^\(.*\)\n\1$/ {
    # Print the first of the duplicated lines
    s/.*\n//
    p
</pre><pre class="example">
</pre><pre class="example">    # Loop until we get a different line
    :b
    $b
    N
    /^\(.*\)\n\1$/ {
        s/.*\n//
        bb
    }
}
</pre><pre class="example">
</pre><pre class="example"># The last line cannot be followed by duplicates
$b
</pre><pre class="example">
</pre><pre class="example"># Found a different one.  Leave it alone in the pattern space
# and go back to the top, hunting its duplicates
D
</pre></div>

<hr>
<a name="uniq-_002du"></a>
<div class="header">
<p>
Next: <a href="#cat-_002ds" accesskey="n" rel="next">cat -s</a>, Previous: <a href="#uniq-_002dd" accesskey="p" rel="prev">uniq -d</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Remove-All-Duplicated-Lines"></a>
<h3 class="section">4.16 Remove All Duplicated Lines</h3>

<p>This script prints only unique lines, like &lsquo;<samp>uniq -u</samp>&rsquo;.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># Search for a duplicate line --- until that, print what you find.
$b
N
/^\(.*\)\n\1$/ ! {
    P
    D
}
</pre><pre class="example">
</pre><pre class="example">:c
# Got two equal lines in pattern space.  At the
# end of the file we simply exit
$d
</pre><pre class="example">
</pre><pre class="example"># Else, we keep reading lines with <code>N</code> until we
# find a different one
s/.*\n//
N
/^\(.*\)\n\1$/ {
    bc
}
</pre><pre class="example">
</pre><pre class="example"># Remove the last instance of the duplicate line
# and go back to the top
D
</pre></div>

<hr>
<a name="cat-_002ds"></a>
<div class="header">
<p>
Previous: <a href="#uniq-_002du" accesskey="p" rel="prev">uniq -u</a>, Up: <a href="#Examples" accesskey="u" rel="up">Examples</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Squeezing-Blank-Lines"></a>
<h3 class="section">4.17 Squeezing Blank Lines</h3>

<p>As a final example, here are three scripts, of increasing complexity
and speed, that implement the same function as &lsquo;<samp>cat -s</samp>&rsquo;, that is
squeezing blank lines.
</p>
<p>The first leaves a blank line at the beginning and end if there are
some already.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># on empty lines, join with next
# Note there is a star in the regexp
:x
/^\n*$/ {
N
bx
}
</pre><pre class="example">
</pre><pre class="example"># now, squeeze all '\n', this can be also done by:
# s/^\(\n\)*/\1/
s/\n*/\
/
</pre></div>

<p>This one is a bit more complex and removes all empty lines
at the beginning.  It does leave a single blank line at end
if one was there.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># delete all leading empty lines
1,/^./{
/./!d
}
</pre><pre class="example">
</pre><pre class="example"># on an empty line we remove it and all the following
# empty lines, but one
:x
/./!{
N
s/^\n$//
tx
}
</pre></div>

<p>This removes leading and trailing blank lines.  It is also the
fastest.  Note that loops are completely done with <code>n</code> and
<code>b</code>, without relying on <code>sed</code> to restart the
the script automatically at the end of a line.
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># delete all (leading) blanks
/./!d
</pre><pre class="example">
</pre><pre class="example"># get here: so there is a non empty
:x
# print it
p
# get next
n
# got chars? print it again, etc... 
/./bx
</pre><pre class="example">
</pre><pre class="example"># no, don't have chars: got an empty line
:z
# get next, if last line we finish here so no trailing
# empty lines are written
n
# also empty? then ignore it, and get next... this will
# remove ALL empty lines
/./!bz
</pre><pre class="example">
</pre><pre class="example"># all empty lines were deleted/ignored, but we have a non empty.  As
# what we want to do is to squeeze, insert a blank line artificially
i\
</pre><pre class="example">
bx
</pre></div>

<hr>
<a name="Limitations"></a>
<div class="header">
<p>
Next: <a href="#Other-Resources" accesskey="n" rel="next">Other Resources</a>, Previous: <a href="#Examples" accesskey="p" rel="prev">Examples</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="GNU-sed_0027s-Limitations-and-Non_002dlimitations"></a>
<h2 class="chapter">5 <acronym>GNU</acronym> <code>sed</code>&rsquo;s Limitations and Non-limitations</h2>

<a name="index-GNU-extensions_002c-unlimited-line-length"></a>
<a name="index-Portability_002c-line-length-limitations"></a>
<p>For those who want to write portable <code>sed</code> scripts,
be aware that some implementations have been known to
limit line lengths (for the pattern and hold spaces)
to be no more than 4000 bytes.
The <small>POSIX</small> standard specifies that conforming <code>sed</code>
implementations shall support at least 8192 byte line lengths.
<acronym>GNU</acronym> <code>sed</code> has no built-in limit on line length;
as long as it can <code>malloc()</code> more (virtual) memory,
you can feed or construct lines as long as you like.
</p>
<p>However, recursion is used to handle subpatterns and indefinite
repetition.  This means that the available stack space may limit
the size of the buffer that can be processed by certain patterns.
</p>

<hr>
<a name="Other-Resources"></a>
<div class="header">
<p>
Next: <a href="#Reporting-Bugs" accesskey="n" rel="next">Reporting Bugs</a>, Previous: <a href="#Limitations" accesskey="p" rel="prev">Limitations</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Other-Resources-for-Learning-About-sed"></a>
<h2 class="chapter">6 Other Resources for Learning About <code>sed</code></h2>

<a name="index-Additional-reading-about-sed"></a>
<p>In addition to several books that have been written about <code>sed</code>
(either specifically or as chapters in books which discuss
shell programming), one can find out more about <code>sed</code>
(including suggestions of a few books) from the FAQ
for the <code>sed-users</code> mailing list, available from:
</p><div class="display">
<pre class="display"><a href="http://sed.sourceforge.net/sedfaq.html">http://sed.sourceforge.net/sedfaq.html</a>
</pre></div>

<p>Also of interest are
<a href="http://www.student.northpark.edu/pemente/sed/index.htm">http://www.student.northpark.edu/pemente/sed/index.htm</a>
and <a href="http://sed.sf.net/grabbag">http://sed.sf.net/grabbag</a>,
which include <code>sed</code> tutorials and other <code>sed</code>-related goodies.
</p>
<p>The <code>sed-users</code> mailing list itself maintained by Sven Guckes.
To subscribe, visit <a href="http://groups.yahoo.com">http://groups.yahoo.com</a> and search
for the <code>sed-users</code> mailing list.
</p>
<hr>
<a name="Reporting-Bugs"></a>
<div class="header">
<p>
Next: <a href="#Extended-regexps" accesskey="n" rel="next">Extended regexps</a>, Previous: <a href="#Other-Resources" accesskey="p" rel="prev">Other Resources</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Reporting-Bugs-1"></a>
<h2 class="chapter">7 Reporting Bugs</h2>

<a name="index-Bugs_002c-reporting"></a>
<p>Email bug reports to <a href="mailto:bug-sed@gnu.org">bug-sed@gnu.org</a>.
Also, please include the output of &lsquo;<samp>sed --version</samp>&rsquo; in the body
of your report if at all possible.
</p>
<p>Please do not send a bug report like this:
</p>
<div class="example">
<pre class="example"><i><i><span class="roman">while building frobme-1.3.4</span></i></i>
$ configure 
error&rarr; sed: file sedscr line 1: Unknown option to 's'
</pre></div>

<p>If <acronym>GNU</acronym> <code>sed</code> doesn&rsquo;t configure your favorite package, take a
few extra minutes to identify the specific problem and make a stand-alone
test case.  Unlike other programs such as C compilers, making such test
cases for <code>sed</code> is quite simple.
</p>
<p>A stand-alone test case includes all the data necessary to perform the
test, and the specific invocation of <code>sed</code> that causes the problem.
The smaller a stand-alone test case is, the better.  A test case should
not involve something as far removed from <code>sed</code> as &ldquo;try to configure
frobme-1.3.4&rdquo;.  Yes, that is in principle enough information to look
for the bug, but that is not a very practical prospect.
</p>
<p>Here are a few commonly reported bugs that are not bugs.
</p>
<dl compact="compact">
<dt><code>N</code> command on the last line</dt>
<dd><a name="index-Portability_002c-N-command-on-the-last-line"></a>
<a name="index-Non_002dbugs_002c-N-command-on-the-last-line"></a>

<p>Most versions of <code>sed</code> exit without printing anything when
the <code>N</code> command is issued on the last line of a file.
<acronym>GNU</acronym> <code>sed</code> prints pattern space before exiting unless of course
the <code>-n</code> command switch has been specified.  This choice is
by design.
</p>
<p>For example, the behavior of
</p><div class="example">
<pre class="example">sed N foo bar
</pre></div>
<p>would depend on whether foo has an even or an odd number of
lines<a name="DOCF10" href="#FOOT10"><sup>10</sup></a>.  Or, when writing a script to read the
next few lines following a pattern match, traditional
implementations of <code>sed</code> would force you to write
something like
</p><div class="example">
<pre class="example">/foo/{ $!N; $!N; $!N; $!N; $!N; $!N; $!N; $!N; $!N }
</pre></div>
<p>instead of just
</p><div class="example">
<pre class="example">/foo/{ N;N;N;N;N;N;N;N;N; }
</pre></div>

<a name="index-POSIXLY_005fCORRECT-behavior_002c-N-command"></a>
<p>In any case, the simplest workaround is to use <code>$d;N</code> in
scripts that rely on the traditional behavior, or to set
the <code>POSIXLY_CORRECT</code> variable to a non-empty value.
</p>
</dd>
<dt>Regex syntax clashes (problems with backslashes)</dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-5"></a>
<a name="index-Non_002dbugs_002c-regex-syntax-clashes"></a>
<p><code>sed</code> uses the <small>POSIX</small> basic regular expression syntax.  According to
the standard, the meaning of some escape sequences is undefined in
this syntax;  notable in the case of <code>sed</code> are <code>\|</code>,
<code>\+</code>, <code>\?</code>, <code>\`</code>, <code>\'</code>, <code>\&lt;</code>,
<code>\&gt;</code>, <code>\b</code>, <code>\B</code>, <code>\w</code>, and <code>\W</code>.
</p>
<p>As in all <acronym>GNU</acronym> programs that use <small>POSIX</small> basic regular
expressions, <code>sed</code> interprets these escape sequences as special
characters.  So, <code>x\+</code> matches one or more occurrences of &lsquo;<samp>x</samp>&rsquo;.
<code>abc\|def</code> matches either &lsquo;<samp>abc</samp>&rsquo; or &lsquo;<samp>def</samp>&rsquo;.
</p>
<p>This syntax may cause problems when running scripts written for other
<code>sed</code>s.  Some <code>sed</code> programs have been written with the
assumption that <code>\|</code> and <code>\+</code> match the literal characters
<code>|</code> and <code>+</code>.  Such scripts must be modified by removing the
spurious backslashes if they are to be used with modern implementations
of <code>sed</code>, like
<acronym>GNU</acronym> <code>sed</code>.
</p>
<p>On the other hand, some scripts use s|abc\|def||g to remove occurrences
of <em>either</em> <code>abc</code> or <code>def</code>.  While this worked until
<code>sed</code> 4.0.x, newer versions interpret this as removing the
string <code>abc|def</code>.  This is again undefined behavior according to
<acronym>POSIX</acronym>, and this interpretation is arguably more robust: older
<code>sed</code>s, for example, required that the regex matcher parsed
<code>\/</code> as <code>/</code> in the common case of escaping a slash, which is
again undefined behavior; the new behavior avoids this, and this is good
because the regex matcher is only partially under our control.
</p>
<a name="index-GNU-extensions_002c-special-escapes-1"></a>
<p>In addition, this version of <code>sed</code> supports several escape characters
(some of which are multi-character) to insert non-printable characters
in scripts (<code>\a</code>, <code>\c</code>, <code>\d</code>, <code>\o</code>, <code>\r</code>,
<code>\t</code>, <code>\v</code>, <code>\x</code>).  These can cause similar problems
with scripts written for other <code>sed</code>s.
</p>
</dd>
<dt><samp>-i</samp> clobbers read-only files</dt>
<dd><a name="index-In_002dplace-editing"></a>
<a name="index-GNU-extensions_002c-in_002dplace-editing-1"></a>
<a name="index-Non_002dbugs_002c-in_002dplace-editing"></a>

<p>In short, &lsquo;<samp>sed -i</samp>&rsquo; will let you delete the contents of
a read-only file, and in general the <samp>-i</samp> option
(see <a href="#Invoking-sed">Invocation</a>) lets you clobber
protected files.  This is not a bug, but rather a consequence
of how the Unix filesystem works.
</p>
<p>The permissions on a file say what can happen to the data
in that file, while the permissions on a directory say what can
happen to the list of files in that directory.  &lsquo;<samp>sed -i</samp>&rsquo;
will not ever open for writing  a file that is already on disk.
Rather, it will work on a temporary file that is finally renamed
to the original name: if you rename or delete files, you&rsquo;re actually
modifying the contents of the directory, so the operation depends on
the permissions of the directory, not of the file.  For this same
reason, <code>sed</code> does not let you use <samp>-i</samp> on a writeable file
in a read-only directory, and will break hard or symbolic links when
<samp>-i</samp> is used on such a file.
</p>
</dd>
<dt><code>0a</code> does not work (gives an error)</dt>
<dd><a name="index-0-address"></a>
<a name="index-GNU-extensions_002c-0-address-1"></a>
<a name="index-Non_002dbugs_002c-0-address"></a>

<p>There is no line 0.  0 is a special address that is only used to treat
addresses like <code>0,/<var>RE</var>/</code> as active when the script starts: if
you write <code>1,/abc/d</code> and the first line includes the word &lsquo;<samp>abc</samp>&rsquo;,
then that match would be ignored because address ranges must span at least
two lines (barring the end of the file); but what you probably wanted is
to delete every line up to the first one including &lsquo;<samp>abc</samp>&rsquo;, and this
is obtained with <code>0,/abc/d</code>.
</p>
</dd>
<dt><code>[a-z]</code> is case insensitive</dt>
<dd><a name="index-Non_002dbugs_002c-localization_002drelated"></a>

<p>You are encountering problems with locales.  POSIX mandates that <code>[a-z]</code>
uses the current locale&rsquo;s collation order &ndash; in C parlance, that means using
<code>strcoll(3)</code> instead of <code>strcmp(3)</code>.  Some locales have a
case-insensitive collation order, others don&rsquo;t.
</p>
<p>Another problem is that <code>[a-z]</code> tries to use collation symbols.
This only happens if you are on the <acronym>GNU</acronym> system, using
<acronym>GNU</acronym> libc&rsquo;s regular expression matcher instead of compiling the
one supplied with <acronym>GNU</acronym> sed.  In a Danish locale, for example,
the regular expression <code>^[a-z]$</code> matches the string &lsquo;<samp>aa</samp>&rsquo;,
because this is a single collating symbol that comes after &lsquo;<samp>a</samp>&rsquo;
and before &lsquo;<samp>b</samp>&rsquo;; &lsquo;<samp>ll</samp>&rsquo; behaves similarly in Spanish
locales, or &lsquo;<samp>ij</samp>&rsquo; in Dutch locales.
</p>
<p>To work around these problems, which may cause bugs in shell scripts, set
the <code>LC_COLLATE</code> and <code>LC_CTYPE</code> environment variables to &lsquo;<samp>C</samp>&rsquo;.
</p>
</dd>
<dt><code>s/.*//</code> does not clear pattern space</dt>
<dd><a name="index-Non_002dbugs_002c-localization_002drelated-1"></a>
<a name="index-GNU-extensions_002c-emptying-pattern-space-1"></a>
<a name="index-Emptying-pattern-space-1"></a>

<p>This happens if your input stream includes invalid multibyte
sequences.  <small>POSIX</small> mandates that such sequences
are <em>not</em> matched by &lsquo;<samp>.</samp>&rsquo;, so that &lsquo;<samp>s/.*//</samp>&rsquo; will not clear
pattern space as you would expect.  In fact, there is no way to clear
sed&rsquo;s buffers in the middle of the script in most multibyte locales
(including UTF-8 locales).  For this reason, <acronym>GNU</acronym> <code>sed</code> provides a &lsquo;z&rsquo;
command (for &lsquo;zap&rsquo;) as an extension.
</p>
<p>To work around these problems, which may cause bugs in shell scripts, set
the <code>LC_COLLATE</code> and <code>LC_CTYPE</code> environment variables to &lsquo;<samp>C</samp>&rsquo;.
</p></dd>
</dl>


<hr>
<a name="Extended-regexps"></a>
<div class="header">
<p>
Next: <a href="#Concept-Index" accesskey="n" rel="next">Concept Index</a>, Previous: <a href="#Reporting-Bugs" accesskey="p" rel="prev">Reporting Bugs</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Extended-regular-expressions"></a>
<h2 class="appendix">Appendix A Extended regular expressions</h2>
<a name="index-Extended-regular-expressions_002c-syntax"></a>

<p>The only difference between basic and extended regular expressions is in
the behavior of a few characters: &lsquo;<samp>?</samp>&rsquo;, &lsquo;<samp>+</samp>&rsquo;, parentheses,
braces (&lsquo;<samp>{}</samp>&rsquo;), and &lsquo;<samp>|</samp>&rsquo;.  While basic regular expressions
require these to be escaped if you want them to behave as special
characters, when using extended regular expressions you must escape
them if you want them <em>to match a literal character</em>.  &lsquo;<samp>|</samp>&rsquo;
is special here because &lsquo;<samp>\|</samp>&rsquo; is a GNU extension &ndash; standard
basic regular expressions do not provide its functionality.
</p>
<p>Examples:
</p><dl compact="compact">
<dt><code>abc?</code></dt>
<dd><p>becomes &lsquo;<samp>abc\?</samp>&rsquo; when using extended regular expressions.  It matches
the literal string &lsquo;<samp>abc?</samp>&rsquo;.
</p>
</dd>
<dt><code>c\+</code></dt>
<dd><p>becomes &lsquo;<samp>c+</samp>&rsquo; when using extended regular expressions.  It matches
one or more &lsquo;<samp>c</samp>&rsquo;s.
</p>
</dd>
<dt><code>a\{3,\}</code></dt>
<dd><p>becomes &lsquo;<samp>a{3,}</samp>&rsquo; when using extended regular expressions.  It matches
three or more &lsquo;<samp>a</samp>&rsquo;s.
</p>
</dd>
<dt><code>\(abc\)\{2,3\}</code></dt>
<dd><p>becomes &lsquo;<samp>(abc){2,3}</samp>&rsquo; when using extended regular expressions.  It
matches either &lsquo;<samp>abcabc</samp>&rsquo; or &lsquo;<samp>abcabcabc</samp>&rsquo;.
</p>
</dd>
<dt><code>\(abc*\)\1</code></dt>
<dd><p>becomes &lsquo;<samp>(abc*)\1</samp>&rsquo; when using extended regular expressions.
Backreferences must still be escaped when using extended regular
expressions.
</p></dd>
</dl>



<hr>
<a name="Concept-Index"></a>
<div class="header">
<p>
Next: <a href="#Command-and-Option-Index" accesskey="n" rel="next">Command and Option Index</a>, Previous: <a href="#Extended-regexps" accesskey="p" rel="prev">Extended regexps</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Concept-Index-1"></a>
<h2 class="unnumbered">Concept Index</h2>

<p>This is a general index of all issues discussed in this manual, with the
exception of the <code>sed</code> commands and command-line options.
</p>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index_cp_symbol-1"><b>0</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Concept-Index_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-W"><b>W</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-Z"><b>Z</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_symbol-1">0</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-0-address"><code>0</code> address</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Additional-reading-about-sed">Additional reading about <code>sed</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Resources">Other Resources</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addr1_002c_002bN"><var>addr1</var>,+N</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addr1_002c_007eN"><var>addr1</var>,~N</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Address_002c-as-a-regular-expression">Address, as a regular expression</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Address_002c-last-line">Address, last line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Address_002c-numeric">Address, numeric</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Addresses_002c-in-sed-scripts">Addresses, in <code>sed</code> scripts</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Append-hold-space-to-pattern-space">Append hold space to pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Append-next-input-line-to-pattern-space">Append next input line to pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Append-pattern-space-to-hold-space">Append pattern space to hold space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Appending-text-after-a-line">Appending text after a line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Backreferences_002c-in-regular-expressions">Backreferences, in regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Branch-to-a-label_002c-if-s_002f_002f_002f-failed">Branch to a label, if <code>s///</code> failed</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Branch-to-a-label_002c-if-s_002f_002f_002f-succeeded">Branch to a label, if <code>s///</code> succeeded</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">Programming Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Branch-to-a-label_002c-unconditionally">Branch to a label, unconditionally</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">Programming Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Buffer-spaces_002c-pattern-and-hold">Buffer spaces, pattern and hold</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution-Cycle">Execution Cycle</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Bugs_002c-reporting">Bugs, reporting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Case_002dinsensitive-matching">Case-insensitive matching</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Caveat-_002d_002d_002d-_0023n-on-first-line">Caveat &mdash; #n on first line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Command-groups">Command groups</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Comments_002c-in-scripts">Comments, in scripts</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditional-branch">Conditional branch</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">Programming Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditional-branch-1">Conditional branch</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Copy-hold-space-into-pattern-space">Copy hold space into pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Copy-pattern-space-into-hold-space">Copy pattern space into hold space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Delete-first-line-from-pattern-space">Delete first line from pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Disabling-autoprint_002c-from-command-line">Disabling autoprint, from command line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-regular-expression">empty regular expression</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Emptying-pattern-space">Emptying pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Emptying-pattern-space-1">Emptying pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Evaluate-Bourne_002dshell-commands">Evaluate Bourne-shell commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Evaluate-Bourne_002dshell-commands_002c-after-substitution">Evaluate Bourne-shell commands, after substitution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Exchange-hold-space-with-pattern-space">Exchange hold space with pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Excluding-lines">Excluding lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extended-regular-expressions_002c-choosing">Extended regular expressions, choosing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extended-regular-expressions_002c-syntax">Extended regular expressions, syntax</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-regexps">Extended regexps</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-File-name_002c-printing">File name, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Files-to-be-processed-as-input">Files to be processed as input</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Flow-of-control-in-scripts">Flow of control in scripts</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">Programming Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Global-substitution">Global substitution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstderr-file"><acronym>GNU</acronym> extensions, <samp>/dev/stderr</samp> file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstderr-file-1"><acronym>GNU</acronym> extensions, <samp>/dev/stderr</samp> file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdin-file"><acronym>GNU</acronym> extensions, <samp>/dev/stdin</samp> file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdin-file-1"><acronym>GNU</acronym> extensions, <samp>/dev/stdin</samp> file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdout-file"><acronym>GNU</acronym> extensions, <samp>/dev/stdout</samp> file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdout-file-1"><acronym>GNU</acronym> extensions, <samp>/dev/stdout</samp> file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdout-file-2"><acronym>GNU</acronym> extensions, <samp>/dev/stdout</samp> file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-0-address"><acronym>GNU</acronym> extensions, <code>0</code> address</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-0-address-1"><acronym>GNU</acronym> extensions, <code>0</code> address</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-0_002caddr2-addressing"><acronym>GNU</acronym> extensions, 0,<var>addr2</var> addressing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-addr1_002c_002bN-addressing"><acronym>GNU</acronym> extensions, <var>addr1</var>,+<var>N</var> addressing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-addr1_002c_007eN-addressing"><acronym>GNU</acronym> extensions, <var>addr1</var>,~<var>N</var> addressing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-branch-if-s_002f_002f_002f-failed"><acronym>GNU</acronym> extensions, branch if <code>s///</code> failed</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-case-modifiers-in-s-commands"><acronym>GNU</acronym> extensions, case modifiers in <code>s</code> commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-checking-for-their-presence"><acronym>GNU</acronym> extensions, checking for their presence</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-disabling"><acronym>GNU</acronym> extensions, disabling</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-emptying-pattern-space"><acronym>GNU</acronym> extensions, emptying pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-emptying-pattern-space-1"><acronym>GNU</acronym> extensions, emptying pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands"><acronym>GNU</acronym> extensions, evaluating Bourne-shell commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands-1"><acronym>GNU</acronym> extensions, evaluating Bourne-shell commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-extended-regular-expressions"><acronym>GNU</acronym> extensions, extended regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-g-and-number-modifier-interaction-in-s-command"><acronym>GNU</acronym> extensions, <code>g</code> and <var>number</var> modifier interaction in <code>s</code> command</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-I-modifier"><acronym>GNU</acronym> extensions, <code>I</code> modifier</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-I-modifier-1"><acronym>GNU</acronym> extensions, <code>I</code> modifier</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-in_002dplace-editing"><acronym>GNU</acronym> extensions, in-place editing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-in_002dplace-editing-1"><acronym>GNU</acronym> extensions, in-place editing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-L-command"><acronym>GNU</acronym> extensions, <code>L</code> command</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-M-modifier"><acronym>GNU</acronym> extensions, <code>M</code> modifier</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-M-modifier-1"><acronym>GNU</acronym> extensions, <code>M</code> modifier</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-modifiers-and-the-empty-regular-expression"><acronym>GNU</acronym> extensions, modifiers and the empty regular expression</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-n_007em-addresses"><acronym>GNU</acronym> extensions, &lsquo;<samp><var>n</var>~<var>m</var></samp>&rsquo; addresses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-quitting-silently"><acronym>GNU</acronym> extensions, quitting silently</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-R-command"><acronym>GNU</acronym> extensions, <code>R</code> command</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-reading-a-file-a-line-at-a-time"><acronym>GNU</acronym> extensions, reading a file a line at a time</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-reformatting-paragraphs"><acronym>GNU</acronym> extensions, reformatting paragraphs</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-returning-an-exit-code"><acronym>GNU</acronym> extensions, returning an exit code</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-returning-an-exit-code-1"><acronym>GNU</acronym> extensions, returning an exit code</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-setting-line-length"><acronym>GNU</acronym> extensions, setting line length</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-special-escapes"><acronym>GNU</acronym> extensions, special escapes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Escapes">Escapes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-special-escapes-1"><acronym>GNU</acronym> extensions, special escapes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-special-two_002daddress-forms"><acronym>GNU</acronym> extensions, special two-address forms</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-subprocesses"><acronym>GNU</acronym> extensions, subprocesses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-subprocesses-1"><acronym>GNU</acronym> extensions, subprocesses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions"><acronym>GNU</acronym> extensions, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regular-Expressions">Regular Expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-1"><acronym>GNU</acronym> extensions, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regular-Expressions">Regular Expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-2"><acronym>GNU</acronym> extensions, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regular-Expressions">Regular Expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-3"><acronym>GNU</acronym> extensions, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regular-Expressions">Regular Expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-4"><acronym>GNU</acronym> extensions, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regular-Expressions">Regular Expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-5"><acronym>GNU</acronym> extensions, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands"><acronym>GNU</acronym> extensions, two addresses supported by most commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands-1"><acronym>GNU</acronym> extensions, two addresses supported by most commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands-2"><acronym>GNU</acronym> extensions, two addresses supported by most commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands-3"><acronym>GNU</acronym> extensions, two addresses supported by most commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-unlimited-line-length"><acronym>GNU</acronym> extensions, unlimited line length</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Limitations">Limitations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-writing-first-line-to-a-file"><acronym>GNU</acronym> extensions, writing first line to a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Goto_002c-in-scripts">Goto, in scripts</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">Programming Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Greedy-regular-expression-matching">Greedy regular expression matching</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regular-Expressions">Regular Expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Grouping-commands">Grouping commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-appending-from-pattern-space">Hold space, appending from pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-appending-to-pattern-space">Hold space, appending to pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-copy-into-pattern-space">Hold space, copy into pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-copying-pattern-space-into">Hold space, copying pattern space into</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-definition">Hold space, definition</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution-Cycle">Execution Cycle</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-exchange-with-pattern-space">Hold space, exchange with pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-In_002dplace-editing">In-place editing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-In_002dplace-editing_002c-activating">In-place editing, activating</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-In_002dplace-editing_002c-Perl_002dstyle-backup-file-names">In-place editing, Perl-style backup file names</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Inserting-text-before-a-line">Inserting text before a line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Labels_002c-in-scripts">Labels, in scripts</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">Programming Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Last-line_002c-selecting">Last line, selecting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-length_002c-setting">Line length, setting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-length_002c-setting-1">Line length, setting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-number_002c-printing">Line number, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-selection">Line selection</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line_002c-selecting-by-number">Line, selecting by number</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line_002c-selecting-by-regular-expression-match">Line, selecting by regular expression match</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line_002c-selecting-last">Line, selecting last</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-List-pattern-space">List pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Mixing-g-and-number-modifiers-in-the-s-command">Mixing <code>g</code> and <var>number</var> modifiers in the <code>s</code> command</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Next-input-line_002c-append-to-pattern-space">Next input line, append to pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Next-input-line_002c-replace-pattern-space-with">Next input line, replace pattern space with</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-0-address">Non-bugs, <code>0</code> address</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-in_002dplace-editing">Non-bugs, in-place editing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-localization_002drelated">Non-bugs, localization-related</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-localization_002drelated-1">Non-bugs, localization-related</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-N-command-on-the-last-line">Non-bugs, <code>N</code> command on the last line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-regex-syntax-clashes">Non-bugs, regex syntax clashes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Parenthesized-substrings">Parenthesized substrings</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Pattern-space_002c-definition">Pattern space, definition</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution-Cycle">Execution Cycle</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Portability_002c-comments">Portability, comments</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Portability_002c-line-length-limitations">Portability, line length limitations</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Limitations">Limitations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Portability_002c-N-command-on-the-last-line">Portability, <code>N</code> command on the last line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-bracket-expressions"><code>POSIXLY_CORRECT</code> behavior, bracket expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regular-Expressions">Regular Expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-enabling"><code>POSIXLY_CORRECT</code> behavior, enabling</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-escapes"><code>POSIXLY_CORRECT</code> behavior, escapes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Escapes">Escapes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-N-command"><code>POSIXLY_CORRECT</code> behavior, <code>N</code> command</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">Reporting Bugs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Print-first-line-from-pattern-space">Print first line from pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Printing-file-name">Printing file name</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Printing-line-number">Printing line number</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Printing-text-unambiguously">Printing text unambiguously</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-Q">Q</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Quitting">Quitting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Quitting-1">Quitting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Range-of-lines">Range of lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Range-with-start-address-of-zero">Range with start address of zero</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Read-next-input-line">Read next input line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Read-text-from-a-file">Read text from a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Read-text-from-a-file-1">Read text from a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Reformat-pattern-space">Reformat pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Reformatting-paragraphs">Reformatting paragraphs</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replace-hold-space-with-copy-of-pattern-space">Replace hold space with copy of pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replace-pattern-space-with-copy-of-hold-space">Replace pattern space with copy of hold space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replacing-all-text-matching-regexp-in-a-line">Replacing all text matching regexp in a line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replacing-only-nth-match-of-regexp-in-a-line">Replacing only <var>n</var>th match of regexp in a line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replacing-selected-lines-with-other-text">Replacing selected lines with other text</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Requiring-GNU-sed">Requiring <acronym>GNU</acronym> <code>sed</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Script-structure">Script structure</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-Programs">sed Programs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Script_002c-from-a-file">Script, from a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Script_002c-from-command-line">Script, from command line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sed-program-structure"><code>sed</code> program structure</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-Programs">sed Programs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Selecting-lines-to-process">Selecting lines to process</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Selecting-non_002dmatching-lines">Selecting non-matching lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Several-lines_002c-selecting">Several lines, selecting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Slash-character_002c-in-regular-expressions">Slash character, in regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Spaces_002c-pattern-and-hold">Spaces, pattern and hold</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution-Cycle">Execution Cycle</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Special-addressing-forms">Special addressing forms</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Standard-input_002c-processing-as-input">Standard input, processing as input</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Stream-editor">Stream editor</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Introduction">Introduction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subprocesses">Subprocesses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subprocesses-1">Subprocesses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Substitution-of-text_002c-options">Substitution of text, options</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-appending">Text, appending</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-deleting">Text, deleting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-insertion">Text, insertion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-printing">Text, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-printing-after-substitution">Text, printing after substitution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-writing-to-a-file-after-substitution">Text, writing to a file after substitution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Transliteration">Transliteration</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Unbuffered-I_002fO_002c-choosing">Unbuffered I/O, choosing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Usage-summary_002c-printing">Usage summary, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Version_002c-printing">Version, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Working-on-separate-files">Working on separate files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Write-first-line-to-a-file">Write first line to a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Write-to-a-file">Write to a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-Z">Z</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Zero_002c-as-range-start-address">Zero, as range start address</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses">Addresses</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index_cp_symbol-1"><b>0</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Concept-Index_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-W"><b>W</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-Z"><b>Z</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<a name="Command-and-Option-Index"></a>
<div class="header">
<p>
Previous: <a href="#Concept-Index" accesskey="p" rel="prev">Concept Index</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Command-and-Option-Index-1"></a>
<h2 class="unnumbered">Command and Option Index</h2>

<p>This is an alphabetical list of all <code>sed</code> commands and command-line
options.
</p>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-1"><b>#</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-2"><b>-</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-3"><b>:</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-4"><b>=</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-5"><b>{</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-W"><b>W</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-X"><b>X</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Y"><b>Y</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Z"><b>Z</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-fn" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-1">#</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023-_0028comments_0029"><code># (comments)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-2">-</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dbinary"><code>--binary</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dexpression"><code>--expression</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dfile"><code>--file</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dfollow_002dsymlinks"><code>--follow-symlinks</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dhelp"><code>--help</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002din_002dplace"><code>--in-place</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dline_002dlength"><code>--line-length</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dnull_002ddata"><code>--null-data</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dposix"><code>--posix</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dquiet"><code>--quiet</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dregexp_002dextended"><code>--regexp-extended</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dseparate"><code>--separate</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dsilent"><code>--silent</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dunbuffered"><code>--unbuffered</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dversion"><code>--version</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dzero_002dterminated"><code>--zero-terminated</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002db"><code>-b</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002de"><code>-e</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002df"><code>-f</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002di"><code>-i</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dl"><code>-l</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dn"><code>-n</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dn_002c-forcing-from-within-a-script"><code>-n, forcing from within a script</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dr"><code>-r</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002ds"><code>-s</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002du"><code>-u</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dz"><code>-z</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Invoking-sed">Invoking sed</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-3">:</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003a-_0028label_0029-command"><code>: (label) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">Programming Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-4">=</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003d-_0028print-line-number_0029-command"><code>= (print line number) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-5">{</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_007b_007d-command-grouping"><code>{} command grouping</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-a-_0028append-text-lines_0029-command"><code>a (append text lines) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-b-_0028branch_0029-command"><code>b (branch) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">Programming Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-c-_0028change-to-text-lines_0029-command"><code>c (change to text lines) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-D-_0028delete-first-line_0029-command"><code>D (delete first line) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-d-_0028delete_0029-command"><code>d (delete) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-e-_0028evaluate_0029-command"><code>e (evaluate) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-F-_0028File-name_0029-command"><code>F (File name) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-G-_0028appending-Get_0029-command"><code>G (appending Get) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-g-_0028get_0029-command"><code>g (get) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-H-_0028append-Hold_0029-command"><code>H (append Hold) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-h-_0028hold_0029-command"><code>h (hold) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-i-_0028insert-text-lines_0029-command"><code>i (insert text lines) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-L-_0028fLow-paragraphs_0029-command"><code>L (fLow paragraphs) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-l-_0028list-unambiguously_0029-command"><code>l (list unambiguously) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-N-_0028append-Next-line_0029-command"><code>N (append Next line) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-n-_0028next_002dline_0029-command"><code>n (next-line) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-P-_0028print-first-line_0029-command"><code>P (print first line) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-p-_0028print_0029-command"><code>p (print) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-Q">Q</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-q-_0028quit_0029-command"><code>q (quit) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">Common Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Q-_0028silent-Quit_0029-command"><code>Q (silent Quit) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-r-_0028read-file_0029-command"><code>r (read file) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-R-_0028read-line_0029-command"><code>R (read line) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-s-command_002c-option-flags"><code>s command, option flags</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The &quot;s&quot; Command</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-T-_0028test-and-branch-if-failed_0029-command"><code>T (test and branch if failed) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-t-_0028test-and-branch-if-successful_0029-command"><code>t (test and branch if successful) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">Programming Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-v-_0028version_0029-command"><code>v (version) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-w-_0028write-file_0029-command"><code>w (write file) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-W-_0028write-first-line_0029-command"><code>W (write first line) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-X">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-x-_0028eXchange_0029-command"><code>x (eXchange) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-Y">Y</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-y-_0028transliterate_0029-command"><code>y (transliterate) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">Other Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-Z">Z</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-z-_0028Zap_0029-command"><code>z (Zap) command</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">Extended Commands</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-1"><b>#</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-2"><b>-</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-3"><b>:</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-4"><b>=</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-5"><b>{</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-W"><b>W</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-X"><b>X</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Y"><b>Y</b></a>
 &nbsp; 
<a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Z"><b>Z</b></a>
 &nbsp; 
</td></tr></table>

<a name="SEC_Contents"></a>
<h2 class="contents-heading">Table of Contents</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Introduction-1" href="#Introduction">1 Introduction</a></li>
  <li><a name="toc-Invocation" href="#Invoking-sed">2 Invocation</a></li>
  <li><a name="toc-sed-Programs-1" href="#sed-Programs">3 <code>sed</code> Programs</a>
  <ul class="no-bullet">
    <li><a name="toc-How-sed-Works" href="#Execution-Cycle">3.1 How <code>sed</code> Works</a></li>
    <li><a name="toc-Selecting-lines-with-sed" href="#Addresses">3.2 Selecting lines with <code>sed</code></a></li>
    <li><a name="toc-Overview-of-Regular-Expression-Syntax" href="#Regular-Expressions">3.3 Overview of Regular Expression Syntax</a></li>
    <li><a name="toc-Often_002dUsed-Commands" href="#Common-Commands">3.4 Often-Used Commands</a></li>
    <li><a name="toc-The-s-Command" href="#The-_0022s_0022-Command">3.5 The <code>s</code> Command</a></li>
    <li><a name="toc-Less-Frequently_002dUsed-Commands" href="#Other-Commands">3.6 Less Frequently-Used Commands</a></li>
    <li><a name="toc-Commands-for-sed-gurus" href="#Programming-Commands">3.7 Commands for <code>sed</code> gurus</a></li>
    <li><a name="toc-Commands-Specific-to-GNU-sed" href="#Extended-Commands">3.8 Commands Specific to <acronym>GNU</acronym> <code>sed</code></a></li>
    <li><a name="toc-GNU-Extensions-for-Escapes-in-Regular-Expressions" href="#Escapes">3.9 <acronym>GNU</acronym> Extensions for Escapes in Regular Expressions</a></li>
  </ul></li>
  <li><a name="toc-Some-Sample-Scripts" href="#Examples">4 Some Sample Scripts</a>
  <ul class="no-bullet">
    <li><a name="toc-Centering-Lines" href="#Centering-lines">4.1 Centering Lines</a></li>
    <li><a name="toc-Increment-a-Number" href="#Increment-a-number">4.2 Increment a Number</a></li>
    <li><a name="toc-Rename-Files-to-Lower-Case" href="#Rename-files-to-lower-case">4.3 Rename Files to Lower Case</a></li>
    <li><a name="toc-Print-bash-Environment" href="#Print-bash-environment">4.4 Print <code>bash</code> Environment</a></li>
    <li><a name="toc-Reverse-Characters-of-Lines" href="#Reverse-chars-of-lines">4.5 Reverse Characters of Lines</a></li>
    <li><a name="toc-Reverse-Lines-of-Files" href="#tac">4.6 Reverse Lines of Files</a></li>
    <li><a name="toc-Numbering-Lines" href="#cat-_002dn">4.7 Numbering Lines</a></li>
    <li><a name="toc-Numbering-Non_002dblank-Lines" href="#cat-_002db">4.8 Numbering Non-blank Lines</a></li>
    <li><a name="toc-Counting-Characters" href="#wc-_002dc">4.9 Counting Characters</a></li>
    <li><a name="toc-Counting-Words" href="#wc-_002dw">4.10 Counting Words</a></li>
    <li><a name="toc-Counting-Lines" href="#wc-_002dl">4.11 Counting Lines</a></li>
    <li><a name="toc-Printing-the-First-Lines" href="#head">4.12 Printing the First Lines</a></li>
    <li><a name="toc-Printing-the-Last-Lines" href="#tail">4.13 Printing the Last Lines</a></li>
    <li><a name="toc-Make-Duplicate-Lines-Unique" href="#uniq">4.14 Make Duplicate Lines Unique</a></li>
    <li><a name="toc-Print-Duplicated-Lines-of-Input" href="#uniq-_002dd">4.15 Print Duplicated Lines of Input</a></li>
    <li><a name="toc-Remove-All-Duplicated-Lines" href="#uniq-_002du">4.16 Remove All Duplicated Lines</a></li>
    <li><a name="toc-Squeezing-Blank-Lines" href="#cat-_002ds">4.17 Squeezing Blank Lines</a></li>
  </ul></li>
  <li><a name="toc-GNU-sed_0027s-Limitations-and-Non_002dlimitations" href="#Limitations">5 <acronym>GNU</acronym> <code>sed</code>&rsquo;s Limitations and Non-limitations</a></li>
  <li><a name="toc-Other-Resources-for-Learning-About-sed" href="#Other-Resources">6 Other Resources for Learning About <code>sed</code></a></li>
  <li><a name="toc-Reporting-Bugs-1" href="#Reporting-Bugs">7 Reporting Bugs</a></li>
  <li><a name="toc-Extended-regular-expressions" href="#Extended-regexps">Appendix A Extended regular expressions</a></li>
  <li><a name="toc-Concept-Index-1" href="#Concept-Index">Concept Index</a></li>
  <li><a name="toc-Command-and-Option-Index-1" href="#Command-and-Option-Index">Command and Option Index</a></li>
</ul>
</div>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h3><a name="FOOT1" href="#DOCF1">(1)</a></h3>
<p>This applies to commands such as <code>=</code>,
<code>a</code>, <code>c</code>, <code>i</code>, <code>l</code>, <code>p</code>.  You can
still write to the standard output by using the <code>w</code>
<a name="index-GNU-extensions_002c-_002fdev_002fstdout-file"></a>
or <code>W</code> commands together with the <samp>/dev/stdout</samp>
special file</p>
<h3><a name="FOOT2" href="#DOCF2">(2)</a></h3>
<p>Note that <acronym>GNU</acronym> <code>sed</code> creates the backup
file whether or not any output is actually changed.</p>
<h3><a name="FOOT3" href="#DOCF3">(3)</a></h3>
<p>Actually,
if <code>sed</code> prints a line without the terminating newline, it will
nevertheless print the missing newline as soon as more text is sent to
the same output stream, which gives the &ldquo;least expected surprise&rdquo;
even though it does not make commands like &lsquo;<samp>sed -n p</samp>&rsquo; exactly
identical to <code>cat</code>.</p>
<h3><a name="FOOT4" href="#DOCF4">(4)</a></h3>
<p>This is equivalent to <code>p</code> unless the <samp>-i</samp>
option is being used.</p>
<h3><a name="FOOT5" href="#DOCF5">(5)</a></h3>
<p>This is equivalent to <code>p</code> unless the <samp>-i</samp>
option is being used.</p>
<h3><a name="FOOT6" href="#DOCF6">(6)</a></h3>
<p>All
the escapes introduced here are <acronym>GNU</acronym>
extensions, with the exception of <code>\n</code>.  In basic regular
expression mode, setting <code>POSIXLY_CORRECT</code> disables them inside
bracket expressions.</p>
<h3><a name="FOOT7" href="#DOCF7">(7)</a></h3>
<p><code>sed</code> guru Greg
Ubben wrote an implementation of the <code>dc</code> <small>RPN</small> calculator!
It is distributed together with sed.</p>
<h3><a name="FOOT8" href="#DOCF8">(8)</a></h3>
<p>This requires
another script to pad the output of banner; for example
</p>
<div class="example">
<pre class="example">#! /bin/sh

banner -w $1 $2 $3 $4 |
  sed -e :a -e '/^.\{0,'$1'\}$/ { s/$/ /; ba; }' |
  ~/sedscripts/reverseline.sed
</pre></div>
<h3><a name="FOOT9" href="#DOCF9">(9)</a></h3>
<p>Some implementations
have a limit of 199 commands per script</p>
<h3><a name="FOOT10" href="#DOCF10">(10)</a></h3>
<p>which is the actual &ldquo;bug&rdquo; that prompted the
change in behavior</p>
</div>
<hr>



</body>
</html>
